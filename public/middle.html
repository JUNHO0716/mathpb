<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>M.CLASS ì¤‘ë“±ê´€ ê¸°ì¶œìë£Œ ë‹¤ìš´ë¡œë“œ</title>
  <link rel="icon" type="image/png" href="/favicon.png" />
  <meta name="viewport" content="width=1200">
  <link href="https://fonts.googleapis.com/css?family=Noto+Sans+KR:900,700,400&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Nanum+Pen+Script&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Noto Sans KR', Arial, sans-serif;
      background: #fff;
      margin: 0;
      color: #212529;
    }
    /* ------- ìƒë‹¨ ë„¤ë¹„(main_home ìŠ¤íƒ€ì¼, ìƒ‰ìƒ ë³€ê²½) -------- */
    .top-nav {
      width: 100vw; min-width:1100px;
      height: 56px;
      background: #fff;
      display: flex; align-items: center;
      justify-content: space-between;
      box-sizing: border-box;
      padding: 0 32px 0 13px;
      position: fixed; left: 0; top: 0; z-index: 100;
      border-bottom: 2px solid rgba(35,128,88,0.20); 
    }
    .logo-box { display:flex; align-items:center; gap:8px; }
    .logo-img { width:27px; height:27px; display:block;}
    .logo-text { color: #238058; font-size: 1.45rem; font-weight: 700; letter-spacing:0.02em;}
    .menu-area { display:flex; align-items:center; gap:16px;}
    .nav-link {
      font-size: 1.08rem;
      font-weight: 500;
      letter-spacing: -0.3px;
      color: #222;
      text-decoration: none;      /* ë°‘ì¤„ ì—†ì• ê¸° */
      transition: color 0.13s;
    }
    .nav-link:hover {
      color: #34bb66;
      text-decoration: none;      /* í˜¸ë²„ ì‹œì—ë„ ë°‘ì¤„ ì—†ë„ë¡ */
    }
    .nav-cash { display:flex; align-items:center; gap:2px;}
    .cash-icon { width:20px; height:20px; margin-right:2px; vertical-align:middle;}

    /* ë©”ë‰´ ë²„íŠ¼ (ë”ë³´ê¸°, í”„ë¡œí•„)ì— ë³¼ë¡ ë– ì˜¤ë¥´ëŠ” íš¨ê³¼ ì¶”ê°€ */
    .menu-btn {
      background: transparent;
      border: none;
      margin: 0 3px;
      padding: 0;
      cursor: pointer;
      transition: transform 0.15s, box-shadow 0.15s;
    }
    .menu-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }
    .menu-icon { width:24px; height:24px; }
    .user-btns { display:none; }
    .nav-underline { width:100vw; height:2px; background:#238058; margin:0; padding:0; }

    /* â–¼ ë“œë¡­ë‹¤ìš´/ë©”ë‰´ ê³µí†µ (ìƒ‰ìƒì€ ê·¸ëŒ€ë¡œ í°ìƒ‰/íšŒìƒ‰ ìœ ì§€) */
    .dropdown-menu {
       display: none;
       position: fixed;
       top: 62px;
       right: 36px;
       background: #fff;
       border-radius: 13px;
       box-shadow: 0 6px 30px 2px rgba(80,90,120,0.17);
       min-width: 218px;
       z-index: 1000;
       padding: 10px 0;
       animation: menuPop 0.20s cubic-bezier(0.8,0.2,0.4,1);
    }
    .dropdown-menu ul { margin:0; padding:0; list-style:none;}
    .dropdown-menu li { padding: 0; }
    .dropdown-menu a {
      display:flex; align-items:center; gap:7px;
      color:#1a284b; text-decoration:none; padding: 12px 22px; font-size:1.08rem;
      border-radius:7px; transition:background 0.11s;
    }
    .dropdown-menu a:hover { background:#f1f6ff; }
    .menu-icon-menu img { width:21px; height:21px; vertical-align:middle;}
    @keyframes menuShow { from{opacity:0; transform:translateY(-10px);} to{opacity:1; transform:none;} }
    .menu-dropdown { right:110px; }
    .profile-dropdown { right:22px; }

    .main-layout {
      /* === ë„“ì´/ì •ë ¬ === */
      width: calc(100% - 64px);   /* ì¢Œìš° 32px ì—¬ë°±ë§Œ ë‚¨ê¸°ê³  í™”ë©´ì„ ê½‰ ì±„ì›€ */
      max-width: 1600px;          /* ì´ˆê³ í•´ìƒë„ì—ì„œë„ 1600pxê¹Œì§€ë§Œ */
      margin: 0 auto;             /* ê°€ìš´ë° ì •ë ¬(í—¤ë”ì™€ ê°™ì€ ì—¬ë°±) */
      padding-top: 105px;         /* í—¤ë” ë†’ì´ ë§Œí¼ ìœ„ìª½ ê°„ê²© */
      padding-left: 0;            /* ì¢Œì¸¡ ì—¬ë°± ì œê±° â†’ ì¢€ ë” ì™¼ìª½ìœ¼ë¡œ */
      
      /* === ë ˆì´ì•„ì›ƒ ë°©ì‹ : flex â†’ grid ë³€ê²½ === */
      display: grid;
      grid-template-columns: 1fr 320px; /* ì£¼ ì½˜í…ì¸ , ê´‘ê³ /ê³µì§€ ì»¬ëŸ¼ */
      column-gap: 48px;                 /* ë‘ ì»¬ëŸ¼ ê°„ê²© */
      align-items: start;
      min-height: 700px;
    }
    /* ì¤‘ë“±/ê³ ë“± íƒ­ */
    .level-tab-row {
      display: flex; flex-direction: row; align-items: center; gap: 28px;
      margin-bottom: 22px; margin-left: 0; margin-top: 0px; 
    }
    .level-tab-link {
      font-size: 2.9rem;
      font-weight: 900;
      letter-spacing: -0.04em;
      padding: 0 8px;
      cursor: pointer;
      text-decoration: none;
      color: #bfc3c2;
      border-bottom: 4px solid transparent;
      transition: color 0.17s, border-bottom 0.17s;
    }
    .level-tab-link.active {
      color: #18855d;
      border-bottom: 4px solid #18855d;
      pointer-events: none;
    }
    .level-tab-link:not(.active):hover {
      color: #17b26a;
      border-bottom: 4px solid #17b26a;
    }
    .filter-row {
      display: flex; flex-direction: row; align-items: center; gap: 14px; width: 100%; flex-wrap: nowrap;  justify-content: flex-end;
      margin-bottom: 24px; margin-left: 5px;
    }
    .filter-select, .filter-input {
      border: 1.5px solid #e6f1e5;
      background: #f7fbf7;
      border-radius: 9px;
      padding: 12px 16px;
      font-size: 1.13rem;
      color: #4c634e;
      outline: none;
      min-width: 110px;
      font-weight: 500;
      transition: border 0.15s;
    }
    .filter-select:focus, .filter-input:focus {
      border: 1.5px solid #39c077;
      background: #fff;
    }
    .filter-btn {
      background: #18b164;
      color: #fff;
      border: none;
      border-radius: 9px;
      padding: 0 40px;
      font-weight: 900;
      font-size: 1.14rem;
      letter-spacing: 0.04em;
      cursor: pointer;
      transition: background 0.13s;
      margin-left: 0;
      min-width: 90px;
      height: 50px;
      white-space: nowrap;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .filter-btn:hover { background: #12874b; }
    .data-table {
      width: 100%;
      margin-top: 12px;
      background: #f8fbfa;
      border-radius: 13px;
      box-shadow: 0 2px 8px #e3f8e955;
      margin-left: 5px;
      border-collapse: collapse;
    }
    .data-table th, .data-table td {
      padding: 9px 9px;
      font-size: 1.06rem;
      font-weight: 500;
      text-align: center;
      vertical-align: middle;
      height: 42px;
    }
    .data-table th {
      background: #f6faf6;
      color: #18b164;
      font-weight: 800;
      border-radius: 7px;
      letter-spacing: -0.03em;
      border-bottom: 1.5px solid #e3f4e6;
    }
    .data-table tr { border-bottom: 1.3px solid #eef3f0; }
    .data-table tr:last-child { border-bottom: none; }
    .data-table tbody tr:hover { background: #f0fdf6; }
    .download-btn {
      background: #12ba66;
      color: #fff;
      border: none;
      border-radius: 6px;
      padding: 8px 22px;
      font-weight: 700;
      cursor: pointer;
      transition: background 0.15s, text-decoration 0.13s;
      font-size: 1rem;
      letter-spacing: 0.01em;
      text-decoration: none;
      display: inline-block;
    }
    .download-btn:hover { 
      background: #158f4d; 
      text-decoration: underline;    
    }
    .ads-bar {
      display: flex; flex-direction: column; gap: 28px; margin-top: 0;
      align-items: flex-end; min-width: 272px;
    }
    .ad1-box {
      width: 300px; height: 280px;
      border-radius: 14px;
      background: #f6fafd;
      border: 2.5px solid #f2f3f4;
      box-shadow: 0 2px 10px #e0e0e0aa;
      display: flex; align-items: center; justify-content: center;
      font-size: 1.16rem; font-weight: 600; color: #b5b5b5;
      overflow: hidden;
      padding: 0;
    }
    /* --- ê³µì§€ì‚¬í•­ ë¯¸ë¦¬ë³´ê¸° --- */
    .notice-preview-box {
      width: 300px;
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 4px 18px #e0efe966;
      padding: 0 0 14px 0;
      margin-bottom: 26px;
      overflow: hidden;
      border: 1.5px solid #f2f3f4; /* ğŸ‘ˆ ì¶”ê°€ (ì•„ì£¼ ì˜…ì€ íšŒìƒ‰ í…Œë‘ë¦¬) */
    }
    .notice-preview-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 18px 0 18px;
      height: 50px;
      background: linear-gradient(90deg, #08b779 93%, #00c393 100%);
      border-radius: 16px 16px 0 0;
    }
    .notice-preview-header .title {
      color: #fff;
      font-size: 1.15rem;
      font-weight: 900;
      letter-spacing: -0.01em;
    }
    .notice-preview-arrowbtns {
      display: flex; gap: 1px;
    }
    .notice-preview-arrow {
      border: none;
      background: #fff;
      color: #222;
      font-size: 0.93rem;
      border-radius: 4px;
      width: 20px; height: 20px;
      cursor: pointer;
      display: flex; align-items: center; justify-content: center;
      transition: background 0.13s, color 0.13s;
      box-shadow: 0 2px 8px #1ba07212;
      font-weight: bold;
      margin-left: 1px;
      outline: none;
      padding: 0;
    }
    .notice-preview-arrow:active {
      background: #eee;
      color: #1fa266;
    }
    .notice-preview-list {
      display: flex; flex-direction: column; gap: 0;
      padding: 9px 18px 0 18px;
    }
    .notice-preview-item {
      display: flex; align-items: center;
      height: 32px; font-size: 0.97rem; border-radius: 5px;
      margin-bottom: 1px; background: none;
      cursor: pointer; transition: background 0.13s;
      overflow: hidden;
    }
    .notice-preview-item:hover { background: #f5faf8; }
    .notice-preview-number {
      min-width: 18px; height: 18px; margin-right: 7px;
      background: #e3e6ec;
      color: #fff;
      font-weight: 700; font-size: 0.8rem;
      border-radius: 4px;
      display: flex; align-items: center; justify-content: center;
      font-family: 'Noto Sans KR', Arial, sans-serif;
    }
    .notice-preview-title {
      flex: 1; color: #444; font-size: 0.97rem; font-weight: 400;
      white-space: nowrap; text-overflow: ellipsis; overflow: hidden;
    }
    .ad2-box {
      width: 300px; height: 900px;
      border-radius: 14px;
      background: #f6fafd;
      border: 2.5px solid #f2f3f4;
      box-shadow: 0 2px 10px #e0e0e0aa;
      display: flex; align-items: center; justify-content: center;
      font-size: 1.16rem; font-weight: 600; color: #b5b5b5;
      overflow: hidden;
      padding: 0;
    }
    .ad-box img { width: 100%; height: 100%; object-fit: cover; display: block;}
    @media (max-width: 1200px) {
      .main-layout { flex-direction: column; gap: 16px; padding-top: 64px;}
      .ads-bar { flex-direction: row; gap:10px; align-items: stretch; min-width:0;}
      .ad-box { min-width:0; width:100%; }
    }
    #grade.filter-select { min-width: 90px; width: 150px; }
    #year.filter-input { min-width: 60px; width: 100px; }
    #semester.filter-select { min-width: 150px; width: 150px; }
    #school.filter-input { min-width: 90px; width: 110px; }
    #district.filter-input { min-width: 75px; width: 90px; }
    /* ëª¨ë“  ë„¤ë¹„ê²Œì´ì…˜ ì•„ì´ì½˜ ê³µí†µ */
    .nav-icon {
      width: 20px;    /* ì•„ì´ì½˜ í¬ê¸° */
      height: 20px;
      margin-right: 4px;   /* ì•„ì´ì½˜-í…ìŠ¤íŠ¸ ê°„ê²© */
      vertical-align: middle;
    }

    /* ì•„ì´ì½˜ì´ ë“¤ì–´ê°„ ë§í¬ë¥¼ ì˜†ìœ¼ë¡œ ì‚´ì§ ë„ì›€ */
    .nav-link {
      display: flex;
      align-items: center;
      gap: 4px;       /* ì•„ì´ì½˜-í…ìŠ¤íŠ¸ ê°„ê²©(Backup) */
    }

    /* ë§í¬ë“¤ ì‚¬ì´ ê°„ê²© ë„‰ë„‰íˆ */
    .menu-area {
      gap: 24px;      /* ê¸°ì¡´ 16px â†’ 24px */
    }

    .filter-label{
      font-size: 1.2rem;
      font-weight: 600;
      color: #212529;

      /* â–¼ ìƒˆë¡œ ì¶”ê°€í•œ ë¶€ë¶„ */
      border: 1.5px solid #d0d0d0;   /* ì–‡ì€ íšŒìƒ‰ í…Œë‘ë¦¬ */
      border-radius: 6px;            /* ëª¨ì„œë¦¬ ì‚´ì§ ë‘¥ê¸€ê²Œ */
      padding: 9px 65px;             /* í…ìŠ¤íŠ¸ ì£¼ë³€ ì—¬ë°± */

      margin-right: 0px;            /* ì˜¤ë¥¸ìª½ ê°„ê²© ìœ ì§€ */
      white-space: nowrap;           /* ì¤„ë°”ê¿ˆ ë°©ì§€ */
      display: inline-block;         /* ë°•ìŠ¤ í˜•íƒœë¡œ */
    }
    .user-id{
      margin-left:6px;
      font-size:1.05rem;
      font-weight:700;
      color:#212529;
      user-select:none;
    }
    .nav-profile{
      display:inline-flex;        /* ì•„ì´ì½˜Â·ê¸€ì ê°™ì€ ì¤„, ì„¸ë¡œ ì •ë ¬ */
      align-items:center;         /* ë†’ì´ ë§ì¶¤ */
      gap:6px;
      background:transparent;
      border:none;
      padding:0;
      cursor:pointer;
    }
    .nav-profile .user-id{
      font-size:1.08rem;          /* .nav-link ì™€ ë™ì¼ */
      font-weight:500;
      letter-spacing:-0.3px;
      color:#222;
      transition:color .13s;
    }
    .nav-profile:hover{
      transform:none;             /* menu-btn ê³µí†µ íš¨ê³¼ ë¬´ë ¥í™” */
      box-shadow:none;
    }
    .nav-profile:hover .user-id{
      color:#34bb66;              /* .nav-link:hover ì™€ ë™ì¼ */
    }
    .nav-profile:hover .menu-icon{
      filter:brightness(.85);     /* ì‚´ì§ ì–´ë‘ì›Œì§€ëŠ” ì •ë„ë§Œ */
    }

    /* ===== ì¤‘ë“±Â·ê³ ë“± í† ê¸€ + ê°€ìš´ë° ë¬¸êµ¬ ===== */
    .level-switch-row{
      position:relative;            /* ê°€ìš´ë° ì •ë ¬ ê¸°ì¤€ */
      display:flex; align-items:center;
      margin:0 0 22px 0;            /* ê¸°ì¡´ ê°„ê²© ë§ì¶¤ */
    }
    /* â”€â”€ í† ê¸€(Pill) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .level-switch{
      display:inline-flex; gap:2px;
      background:#ECEFF4;           /* íšŒìƒ‰ ë°°ê²½ */
      border-radius:40px; padding:4px;
    }
    .switch-btn{
      padding: 6px 22px;            /* ì‚¬ì§„ê³¼ ë¹„ìŠ·í•œ í¬ê¸° */
      border-radius: 26px;
      font-size: 0.88rem; font-weight:700;
      color:#485067; text-decoration:none;
      transition:all .18s;
    }
    .switch-btn:hover   { background:#DFE3E9; }
    .switch-btn.active  { background:#18855d; color:#fff; pointer-events:none; }

    /* â”€â”€ ê°€ìš´ë° ë¬¸êµ¬ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .level-center-text{
      position:absolute;
      left:55%;
      top:-20px;               /* â˜… ìœ„ë¡œ 6 px ëŒì–´ì˜¬ë¦¼ (í•„ìš”í•˜ë©´ ìˆ«ìë§Œ ì¡°ì •) */
      transform:translateX(-50%);
      font-size:2.6rem;
      font-weight:900;
      color:#000;
      display:flex; align-items:center; gap:8px;
    }
    .title-type{
      color:#18855d;                 /* ìŠ¤ìƒ·ê³¼ ë¹„ìŠ·í•œ íŒŒë€ìƒ‰ */
      font-size:2.4rem;
      font-weight:700;               /* Nanum Pen ScriptëŠ” weight=400 í•˜ë‚˜ë¿ì´ë¼ 700ë„ OK */
      font-family:'Nanum Pen Script', 'Noto Sans KR', sans-serif;
    }

    .title-main{
      /* â‘  ì†ê¸€ì”¨ì²´ ì ìš© */
      font-family: 'Nanum Pen Script', 'Noto Sans KR', sans-serif;
      /* â‘¡ ìƒ‰ìƒÂ·í¬ê¸°Â·êµµê¸° (ì›í•˜ëŠ” ê°’ìœ¼ë¡œ ì¡°ì •) */
      color: #000;
      font-size: 2.9rem;
      font-weight: 600;  /* í•„ìš”í•˜ë©´ 400~900 ì‚¬ì´ì—ì„œ ì¡°ì ˆ */
      margin-left: 6px;
    }

    .center-logo{ width:36px; height:36px; }

    .download-img-btn img {
      vertical-align: middle;
      border-radius: 4px;
      box-shadow: 0 2px 8px #0001;
      transition: transform 0.13s, box-shadow 0.13s;
    }
    .download-img-btn:hover img {
      transform: translateY(-2px) scale(1.08);
      box-shadow: 0 4px 16px #22ccaa44;
    }


  </style>
</head>
<body>
  <!-- âœ… ìƒë‹¨ ë„¤ë¹„ê²Œì´ì…˜ (ë©”ì¸í™ˆ êµ¬ì¡°/ìŠ¤íƒ€ì¼/ë™ì‘ ê·¸ëŒ€ë¡œ, ìƒ‰ìƒë§Œ ë³€ê²½) -->
  <header class="top-nav">
    <div class="logo-box">
      <img src="logo_main.png" class="logo-img" alt="ë¡œê³ " />
      <span class="logo-text">ìˆ˜í•™ì§€ë‹ˆ</span>
    </div>
    <nav class="menu-area">
      <a href="main_home.html"       class="nav-link">
        <img src="home.png"  class="nav-icon" alt="í™ˆ">
        ë©”ì¸í™ˆ
      </a>

      <a href="my_collection.html"   class="nav-link">
        <img src="book_icon.png"  class="nav-icon" alt="ì±…ì¥">
        ë‚´ ì±…ì¥
      </a>

      <a href="payment.html"         class="nav-link">
        <img src="cash_icon.png"  class="nav-icon" alt="ìºì‹œ">
        ê²°ì œí•˜ê¸°
      </a>
      <a href="admin_upload.html" class="nav-link admin-link" style="display:none;">
        <img src="icon_upload.png" class="nav-icon" alt=""> ìë£Œ ì—…ë¡œë“œ
      </a>
      <a href="admin_files.html"  class="nav-link admin-link" style="display:none;">
        <img src="icon_manage.png" class="nav-icon" alt=""> ìë£Œ ê´€ë¦¬
      </a>
      <!-- ë”ë³´ê¸°(í–„ë²„ê±°) ë©”ë‰´ -->
      <button class="menu-btn" id="moreMenuBtn" title="ë”ë³´ê¸°" type="button">
        <img src="menu_icon.png" class="menu-icon" alt="ë”ë³´ê¸°">
      </button>
      <!-- í”„ë¡œí•„(ì‚¬ëŒ) ë©”ë‰´ -->
      <button class="menu-btn nav-profile" id="profileMenuBtn" title="í”„ë¡œí•„" type="button">
        <img src="profile_icon.png" class="menu-icon" alt="">
        <span id="userId" class="user-id"></span>
      </button>
    </nav>
  </header>
  <div class="nav-underline"></div>

  <!-- â–¼ ë”ë³´ê¸° ë©”ë‰´ (ëª¨ë‹¬) -->
  <div id="moreMenu" class="dropdown-menu menu-dropdown">
    <ul>
      <li><a href="problems.html"><span class="menu-icon-menu"><img src="problems.png" alt=""></span>ë¬¸ì œì€í–‰</a></li>
      <li><a href="my_collection.html"><span class="menu-icon-menu"><img src="icon_book.png" alt=""></span>ë‚´ ì±…ì¥</a></li>
      <li><a href="notice.html"><span class="menu-icon-menu"><img src="icon_notice.png" alt=""></span>ê³µì§€ì‚¬í•­</a></li>
      <li><a href="contact.html"><span class="menu-icon-menu"><img src="icon_contact.png" alt=""></span>ë¬¸ì˜í•˜ê¸°</a></li>
    </ul>
  </div>

  <!-- â–¼ í”„ë¡œí•„ ë©”ë‰´ (ëª¨ë‹¬) -->
  <div id="profileMenu" class="dropdown-menu profile-dropdown">
    <ul>
      <li><a href="profile.html"><span class="menu-icon-menu"><img src="icon_profilemenu.png" alt=""></span>í”„ë¡œí•„ê°€ê¸°</a></li>
      <li>
        <a href="login.html" id="logoutBtn">
          <span class="menu-icon-menu"><img src="icon_logout.png" alt=""></span>ë¡œê·¸ì•„ì›ƒ
        </a>
      </li>
    </ul>
  </div>
  <div class="main-layout">
    <div style="flex:1;min-width:750px;">
      <!-- ì¤‘ë“±/ê³ ë“±ê´€ íƒ­ -->
      <div class="level-switch-row">
        <!-- í† ê¸€ -->
        <div class="level-switch">
          <a href="middle.html" class="switch-btn active">ì¤‘ë“±</a>
          <a href="high.html"   class="switch-btn">ê³ ë“±</a>
        </div>

        <!-- ê°€ìš´ë° ë¬¸êµ¬(ì•„ì´ì½˜ + í…ìŠ¤íŠ¸) -->
      <div class="level-center-text">
        <span class="title-type">ì¤‘ë“±ê´€</span>
        <span class="title-main">í•™êµê¸°ì¶œ</span>
      </div>
      </div>
      <!-- ê²€ìƒ‰/í•„í„° -->
      <div class="filter-row">
        <span class="filter-label">ì •ë³´&nbsp;ì…ë ¥</span>
        <select class="filter-select" id="region"><option value="">ì§€ì—­</option><option>ì„œìš¸</option><option>ê²½ê¸°</option></select>
        <input class="filter-input" id="district" placeholder="êµ¬/êµ°" />
        <input class="filter-input" id="school" placeholder="í•™êµëª…" />
        <select class="filter-select" id="grade">
          <option value="">í•™ë…„</option>
          <option>ì¤‘1</option><option>ì¤‘2</option><option>ì¤‘3</option>
        </select>
        <input class="filter-input" id="year" placeholder="ì—°ë„" type="number"/>
        <select class="filter-select" id="semester">
          <option value="">í•™ê¸°</option>
          <option>1í•™ê¸°ì¤‘ê°„</option>
          <option>1í•™ê¸°ê¸°ë§</option>
          <option>2í•™ê¸°ì¤‘ê°„</option>
          <option>2í•™ê¸°ê¸°ë§</option>
        </select>
        <button class="filter-btn" onclick="searchFiles()">ê²€ìƒ‰</button>
      </div>
      <!-- í‘œ -->
      <table class="data-table">
        <thead>
          <tr>
            <th>ì§€ì—­</th>
            <th>êµ¬/êµ°</th>
            <th>í•™êµ</th>
            <th>í•™ë…„</th>
            <th>ì—°ë„</th>
            <th>í•™ê¸°</th>
            <th>ìë£Œëª…</th>
            <th>ë‹¤ìš´ë¡œë“œ</th>
          </tr>
        </thead>
        <tbody id="file-list">
          <!-- JSë¡œ í‘œ ë°ì´í„° ì±„ì›€ -->
        </tbody>
      </table>
    </div>
    <!-- ê´‘ê³ /ê³µì§€ ë°•ìŠ¤ -->
    <div class="ads-bar">
      <div style="height:0px"></div>
      <div class="ad1-box ad-box"><img src="ad1.png" alt="ê´‘ê³ 1"/></div>
      <!-- --- ê³µì§€ì‚¬í•­ ë¯¸ë¦¬ë³´ê¸° ë°•ìŠ¤ --- -->
      <div class="notice-preview-box" id="noticePreviewBox"></div>
      <div class="ad2-box ad-box"><img src="ad2.png" alt="ê´‘ê³ 2"/></div>
    </div>
  </div>
  <script>
    let fileData = [];
      async function fetchFiles() {
        const level = "ì¤‘ë“±";
        const region = document.getElementById('region').value;
        const district = document.getElementById('district').value.trim();
        const school = document.getElementById('school').value.trim();
        const grade = document.getElementById('grade').value;
        const year = document.getElementById('year').value.trim();
        const semester = document.getElementById('semester').value;
        const params = new URLSearchParams();
        params.append('level', level);
        if(region) params.append('region', region);
        if(district) params.append('district', district);
        if(school) params.append('school', school);
        if(grade) params.append('grade', grade);
        if(year) params.append('year', year);
        if(semester) params.append('semester', semester);

        const res = await fetch('/api/files?' + params.toString());
        fileData = await res.json();
        renderTable(fileData);
      }
      function renderTable(list){
        const tbody = document.getElementById('file-list');
        if(!list.length){
          tbody.innerHTML = `<tr><td colspan="8" style="text-align:center;color:#bbb;">ìë£Œê°€ ì—†ìŠµë‹ˆë‹¤</td></tr>`;
          return;
        }
        tbody.innerHTML = list.map(row=>`
          <tr>
            <td>${row.region}</td>
            <td>${row.district}</td>
            <td>${row.school}</td>
            <td>${row.grade}</td>
            <td>${row.year}</td>
            <td>${row.semester}</td>
            <td>${row.title}</td>
            <td>
              ${row.hwp_filename ? `<a href="/download/${row.id}?type=hwp" class="download-img-btn" title="HWP ë‹¤ìš´ë¡œë“œ"><img src="hwp_btn.png" alt="HWP" style="height:32px;margin-right:4px;"></a>` : ''}
              ${row.pdf_filename ? `<a href="/download/${row.id}?type=pdf" class="download-img-btn" title="PDF ë‹¤ìš´ë¡œë“œ"><img src="pdf_btn.png" alt="PDF" style="height:32px;"></a>` : ''}
              ${!row.hwp_filename && !row.pdf_filename ? '-' : ''}
            </td>
          </tr>
        `).join('');
      }
      function searchFiles(){
        fetchFiles();
      }
    // --------- ê³µì§€ì‚¬í•­ ë¯¸ë¦¬ë³´ê¸° JS ---------
    // API ì„œë²„ì—ì„œ ìµœì‹  10ê°œ fetch
    async function fetchNotices() {
      renderNoticePreview([], true); // << ì´ê²Œ í•µì‹¬!
      try {
        const res = await fetch('/api/notices');
        let list = await res.json();
        list = list.slice(0, 10);
        list = list.map((n, i) => ({ title: n.title || '(ì œëª©ì—†ìŒ)' }));
        renderNoticePreview(list, false); // << ì´ê²Œ í•µì‹¬!
      } catch (e) {
        renderNoticePreview([
          {title: "ê³µì§€ì‚¬í•­ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."}
        ], false);
      }
    }
    let noticePage = 0; // 0: 1~5, 1: 6~10
    function renderNoticePreview(list, loading) {
      const box = document.getElementById('noticePreviewBox');
      if(!box) return;
      box.innerHTML = `
        <div class="notice-preview-header">
          <span class="title">ê³µì§€ì‚¬í•­</span>
          <div class="notice-preview-arrowbtns">
            <button class="notice-preview-arrow" id="prevNoticeBtn">&lt;</button>
            <button class="notice-preview-arrow" id="nextNoticeBtn">&gt;</button>
          </div>
        </div>
        <div class="notice-preview-list"></div>
      `;
      const listDiv = box.querySelector('.notice-preview-list');
      if (loading) {
        listDiv.innerHTML = `<div style="color:#b5b5b5; padding:14px 0; text-align:center;">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>`;
        return;
      }
      const start = noticePage * 5, end = start + 5;
      const view = list.slice(start, end);
      listDiv.innerHTML = view.map((item, i) =>
        `<div class="notice-preview-item">
          <span class="notice-preview-number">${start + i + 1}</span>
          <span class="notice-preview-title">${item.title}</span>
        </div>`
      ).join('');
      box.querySelector('#prevNoticeBtn').onclick = () => {
        if(noticePage > 0) { noticePage--; renderNoticePreview(list); }
      };
      box.querySelector('#nextNoticeBtn').onclick = () => {
        if((noticePage+1)*5 < list.length) { noticePage++; renderNoticePreview(list);}
      };
    }
        function startNoticeAutoSlide() {
      if (noticeSlideTimer) clearInterval(noticeSlideTimer);
      noticeSlideTimer = setInterval(() => {
        if (!window.noticeList) return;
        // í˜ì´ì§€ ë„˜ì–´ê°€ê±°ë‚˜ ë°˜ë³µ
        if((noticePage+1)*5 < window.noticeList.length) noticePage++;
        else noticePage = 0;
        renderNoticePreview(window.noticeList, false);
      }, 5000); // 5ì´ˆë§ˆë‹¤
    }
    function restartNoticeAutoSlide() {
      startNoticeAutoSlide();
    }
    window.onload = ()=>{ fetchFiles(); fetchNotices(); };
        document.addEventListener('DOMContentLoaded', function() {
      // 2. ë”ë³´ê¸°/í”„ë¡œí•„ ë©”ë‰´ ë‹«ê¸° (ë°”ê¹¥ í´ë¦­ ì‹œ)
      document.body.addEventListener('click', function() {
        document.getElementById('moreMenu').style.display = 'none';
        document.getElementById('profileMenu').style.display = 'none';
      });

      // 3. ë”ë³´ê¸° ë²„íŠ¼ í´ë¦­: ë©”ë‰´ ì—´ê¸°
      document.getElementById('moreMenuBtn').onclick = function(e) {
        e.stopPropagation();
        document.getElementById('moreMenu').style.display = 'block';
        document.getElementById('profileMenu').style.display = 'none';
      };

      // 4. í”„ë¡œí•„ ë²„íŠ¼ í´ë¦­: ë©”ë‰´ ì—´ê¸°
      document.getElementById('profileMenuBtn').onclick = function(e) {
        e.stopPropagation();
        document.getElementById('profileMenu').style.display = 'block';
        document.getElementById('moreMenu').style.display = 'none';
      };

      // 5. ë©”ë‰´ ë‚´ì—ì„œ í´ë¦­ ì‹œ ë©”ë‰´ê°€ ë‹«íˆì§€ ì•Šë„ë¡(ë²„ë¸”ë§ ì°¨ë‹¨)
      document.getElementById('moreMenu').onclick = function(e) { e.stopPropagation(); };
      document.getElementById('profileMenu').onclick = function(e) { e.stopPropagation(); };

      // 6. ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ ì—°ê²°
      const logoutBtn = document.getElementById('logoutBtn');
      if (logoutBtn) {
        logoutBtn.onclick = function(e) {
          e.preventDefault();
          localStorage.removeItem('userEmail');
          window.location.href = 'login.html';
        };
      }
      checkLoginStatus();
    });
    
    /* â”€â”€â”€â”€â”€â”€â”€â”€â”€ ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸ & í”„ë¡œí•„ ì˜† ì•„ì´ë”” í‘œì‹œ â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    async function checkLoginStatus () {
      const span = document.getElementById('userId');
      if (!span) return;

      try {
        const res              = await fetch('/check-auth', {credentials:'include'});
        const { isLoggedIn, user={} } = await res.json();

        if (isLoggedIn) {
          const displayId = user.email ? user.email.split('@')[0] : (user.name || '');
          if (displayId) {
            span.textContent   = displayId;
            span.style.display = 'inline';
          }
          if (user.role === 'admin') {
            document.querySelectorAll('.admin-link')
            .forEach(el => el.style.display = 'flex');
          }
          /* ë¡œê·¸ì•„ì›ƒ ì—”ë“œí¬ì¸íŠ¸ë„ ì„œë²„ì— ìš”ì²­ */
          const logoutBtn = document.getElementById('logoutBtn');
          if (logoutBtn) {
            logoutBtn.onclick = async e => {
              e.preventDefault();
              await fetch('/logout', {credentials:'include'});
              location.href = 'login.html';
            };
          }
        }
      } catch (err) {
        console.error('login check fail', err);
      }
    }

      document.addEventListener('DOMContentLoaded', function() {
        document.querySelectorAll('.download-btn').forEach(btn => {
          btn.addEventListener('click', function(e) {
            if (!confirm('ë‹¤ìš´ë¡œë“œ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
              e.preventDefault();  // "ì·¨ì†Œ" ëˆ„ë¥´ë©´ ë‹¤ìš´ë¡œë“œ ì·¨ì†Œ
            }
          });
        });
      });

  </script>
</body>
</html>
