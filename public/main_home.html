<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ìˆ˜í•™ë¬¸ì œì€í–‰</title>
  <link rel="icon" type="image/png" href="/favicon.png" />
  <meta name="theme-color" content="#f6faf6" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
   <!-- â–¼ ìƒˆë¡œ ì¶”ê°€ : í°íŠ¸Â·ì´ë¯¸ì§€ ì„ ë¡œë”© -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

  <!-- ì‹¤ì œ ì£¼ì†ŒëŠ” ë¸Œë¼ìš°ì € ê°œë°œìë„êµ¬ â†’ Network â†’ Font íƒ­ì—ì„œ ë³µì‚¬ -->
  <link rel="preload" as="font"
        href="https://fonts.gstatic.com/s/notosanskr/v32/********.woff2"
        type="font/woff2" crossorigin>

  <link rel="preload" as="image" href="ë°°ê²½.png">

  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    referrerpolicy="no-referrer"
  />
  <link
    href="https://fonts.googleapis.com/css?family=Noto+Sans+KR:900,700,400&display=swap"
    rel="stylesheet"
  />
  <style>
    /* ==============================================
       1. ê¸°ë³¸ ì´ˆê¸°í™” & Body ì„¤ì •
       ============================================== */
    html { background:#f6faf6; }
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    html, body {
      width: 100%;
      height: 100%;
      background: #f6faf6;
      font-family: 'Noto Sans KR', Arial, sans-serif;
      color: #111;
      display: flex;
      justify-content: center;
      align-items: flex-start;
    }
    a {
      text-decoration: none;
      color: inherit;
    }
    button {
      cursor: pointer;
      background: none;
      border: none;
    }

    /* ==============================================
       2. ë©”ì¸ ì»¨í…Œì´ë„ˆ (.main-card)
       ============================================== */
    .main-card {
      width: 90vw;
      max-width: 1000px;
      margin: 36px auto;
      background: #fff;
      border-radius: 28px;
      box-shadow: 0 8px 32px rgba(80, 120, 60, 0.10);
      overflow: hidden;
    }

    /* ==============================================
       3. ë„¤ë¹„ê²Œì´ì…˜ ë°”
       ============================================== */
    nav.nav {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 2.5vw;
      height: 64px;
      background: #fff;
    }
    .nav-logo {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .nav-logo img {
      width: 33px;
      height: 33px;
      object-fit: contain;
    }
    .nav-logo .logo-text {
      font-size: 1.15rem;
      font-weight: 900;
      color: #26784b;
      letter-spacing: -1px;
      line-height: 1;
    }
    .nav-links {
      display: flex;
      gap: 40px;
    }
    .nav-link {
      font-size: 1.08rem;
      font-weight: 500;
      letter-spacing: -0.3px;
      min-height:24px;
      color: #222;
      transition: color 0.13s;
    }
    .nav-link:hover {
      color: #34bb66;
    }

    /* ==============================================
       4. íˆì–´ë¡œ ì¼ëŸ¬ìŠ¤íŠ¸
       ============================================== */
    .hero-image-wrapper{
      position:relative;
      width:100%;
      background:#fff;
      text-align:center;

      /* 16:9 ê³µê°„ í™•ë³´ â†’ ë ˆì´ì•„ì›ƒ ì í”„ ë°©ì§€ */
      padding-bottom:56.25%;
      overflow:hidden;
    }
    .hero-image-wrapper img{
      position:absolute; left:0; top:0;
      width:100%; height:100%;
      object-fit:cover;
    }
    .hero-text {
      position: absolute;
      top: 24px;
      left: 5%;
      width: 55%;
      text-align: left;
      color: #1c4135;
      z-index: 2;
    }
    .hero-text h1 {
      font-size: 2.8rem;
      font-weight: 900;
      line-height: 1.15;
      margin-bottom: 16px;
      letter-spacing: -1.5px;
    }
    .hero-text p {
      font-size: 1.15rem;
      font-weight: 400;
      line-height: 1.7;
      color: #28472d;
    }

    /* ==============================================
       5. ì´ˆë¡ìƒ‰ ë²„íŠ¼ 4ê°œ(.button-row)
       ============================================== */
    .button-row {
      position: relative;
      z-index: 2;
      width: 96%;
      margin: -25px auto 0 auto;
      display: flex;
      gap: 16px;
    }
    .green-btn {
      flex: 1;
      background: #27a267;
      color: #ffffff;
      border-radius: 12px;
      height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      font-size: 1.25rem;
      font-weight: 700;
      box-shadow: 0 2px 12px rgba(226, 243, 233, 0.8);
      transition: background 0.15s;
    }
    .green-btn:hover {
      background: #19763c;
    }
    .btn-icon {
      /* FontAwesome ì•„ì´ì½˜ì´ë¯€ë¡œ í¬ê¸°ì™€ ë§ˆì§„ë§Œ ì§€ì • */
      font-size: 1.3rem;
      margin-right: 8px;
      flex-shrink: 0;
    }

    /* ==============================================
       6. ë…¸ë€ ê³µì§€ë°” (ìŠ¬ë¼ì´ë“œ + ë“œë¡­ë‹¤ìš´)
       ============================================== */
    .notice-bar {
      position: relative;
      width: 96%;
      margin: 32px auto 0 auto;
      padding: 16px 28px;
      background: #feefad;
      color: #1e3328;
      font-size: 1.06rem;
      font-weight: 700;
      letter-spacing: -0.5px;
      border-radius: 11px;
      display: flex;
      align-items: center;
      gap: 14px;
      box-shadow: 0 2px 8px rgba(255, 240, 183, 0.8);
    }
    .notice-bar svg {
      flex-shrink: 0;
      width: 22px;
      height: 22px;
    }
    /* í˜„ì¬ ê³µì§€ë¥¼ ê°ì‹¸ëŠ” ì˜ì—­ */
    #notice-container {
      flex: 1;
      overflow: hidden;
    }
    #current-notice {
      display: inline-block;
      color: #1e3328;
      white-space: nowrap;
    }
    #current-notice:hover {
      text-decoration: underline;
    }
    /* + í† ê¸€ ë²„íŠ¼ ëª¨ì–‘ */
    .notice-toggle {
      background: none;
      color: #000;
      border: none;
      font-size: 1.2rem;
      line-height: 1;
      padding: 0;
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.15s, color 0.15s;
    }
    .notice-toggle:hover {
      transform: scale(1.1);
      color: #333;
    }
    /* ë“œë¡­ë‹¤ìš´ ë¦¬ìŠ¤íŠ¸ */
    .notice-list {
      position: absolute;
      top: 100%;
      right: 0;
      background: #fffdea; /* ì˜…ì€ ë…¸ë€ ë°°ê²½ */
      border: 1px solid #f0e8b8;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      list-style: none;
      padding: 0;
      margin: 4px 0 0 0;
      display: none;
      z-index: 10;
      overflow: hidden;

      width: 400px;
      max-height: 250px;
      overflow-y: auto;
    }
    .notice-list li {
      padding: 12px 16px;
      border-bottom: 1px solid #f0e8b8;
      opacity: 0;
      transform: translateY(-10px);
      animation: slideIn 0.2s forwards;
    }
    .notice-list li:nth-child(1) { animation-delay: 0ms; }
    .notice-list li:nth-child(2) { animation-delay: 50ms; }
    .notice-list li:nth-child(3) { animation-delay: 100ms; }
    .notice-list li:nth-child(4) { animation-delay: 150ms; }
    .notice-list li:nth-child(5) { animation-delay: 200ms; }
    .notice-list li:last-child {
      border-bottom: none;
    }
    .notice-list li a {
      font-size: 1rem;
      color: #333;
      display: block;
      text-decoration: none;
    }
    .notice-list li a:hover {
      text-decoration: underline;
      background: #fff8c4;
    }
    @keyframes slideIn {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* ==============================================
       7. ì„œë¹„ìŠ¤ ì¹´ë“œ 3ê°œ (PNG ì•„ì´ì½˜ ì ìš©)
       ============================================== */
    .cards-row {
      width: 96%;
      margin: 32px auto 0 auto;
      display: flex;
      justify-content: space-between;
      gap: 24px;
    }
    .svc-card {
      flex: 1 1 0;
      background: #f7faf8;
      border-radius: 18px;
      box-shadow: 0 3px 12px rgba(243, 247, 241, 1);
      padding: 36px 12px 24px 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      transition: transform 0.15s, box-shadow 0.15s;
    }
    .svc-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 6px 16px rgba(243, 247, 241, 1);
    }
    .svc-title {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      margin-bottom: 16px;
    }
    .svc-icon {
      width: 100px;
      height: 100px;
      object-fit: contain;
    }
    .svc-title strong {
      font-size: 1.22rem;
      font-weight: 900;
      color: #218155;
      line-height: 1.2;
    }
    .svc-desc {
      font-size: 0.95rem;
      color: #212e1b;
      line-height: 1.7;
    }

    /* ==============================================
       8. â€˜ë‚´ ë¬¸ì œì§€â€™ ì„¹ì…˜: í…Œë‘ë¦¬ & ë‚´ë¶€ ìš”ì†Œ
       ============================================== */
    .my-collection-section {
      margin: 32px auto;
      width: 92%;
      border: 1px solid #e0e0e0;
      border-radius: 12px;
      background: #fff;
      padding: 16px 24px;
    }
    .my-collection-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
    }
    .my-collection-header h2 {
      font-size: 1.4rem;
      font-weight: 900;
      color: #26784b;
    }
    .my-collection-header a {
      font-size: 0.95rem;
      font-weight: 700;
      color: #27a267;
      display: flex;
      align-items: center;
      gap: 4px;
    }
    .my-collection-header a:hover {
      text-decoration: underline;
    }

    .counter-row {
      display: flex;
      justify-content: space-around;
      padding: 12px 0;
      background: #fafcf9;
      border-top: 1px solid #e0e0e0;
      border-bottom: 1px solid #e0e0e0;
      margin-bottom: 12px;
    }
    .counter-item {
      flex: 1;
      text-align: center;
      font-size: 0.95rem;
      color: #333;
      position: relative;
    }
    .counter-item:not(:last-child)::after {
      content: "";
      position: absolute;
      right: 0;
      top: 50%;
      transform: translateY(-50%);
      width: 1px;
      height: 36px;
      background: #e0e0e0;
    }
    .counter-item .count-num {
      font-size: 1.6rem;
      font-weight: 900;
      display: block;
      margin-bottom: 4px;
      color: #26784b;
    }
    .counter-item .count-label {
      font-size: 0.95rem;
      font-weight: 500;
      color: #555;
    }
    .counter-item .badge {
      display: inline-block;
      background: #ff6b6b;
      color: #fff;
      font-size: 0.7rem;
      font-weight: 700;
      padding: 2px 6px;
      border-radius: 12px;
      margin-left: 6px;
    }

    .table-container {
      width: 100%;
      max-height: 276px; /* ì•½ 6ê°œ í–‰(46pxÃ—6)ë§Œ ë³´ì´ë„ë¡ */
      overflow-y: auto;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      min-width: 580px;
    }
    thead {
      position: sticky;
      top: 0;
      background: #f0f9f5;
      z-index: 1;
    }
    thead th {
      padding: 10px 14px;
      text-align: left;
      font-size: 0.9rem;
      font-weight: 700;
      color: #333;
      border-bottom: 1px solid #ddd;
      cursor: pointer;
      user-select: none;
    }
    thead th.sort-asc::after,
    thead th.sort-desc::after {
      content: "";
      display: inline-block;
      margin-left: 6px;
      vertical-align: middle;
      border: 6px solid transparent;
    }
    thead th.sort-asc::after {
      border-bottom-color: #333;
    }
    thead th.sort-desc::after {
      border-top-color: #333;
    }
    tbody tr {
      border-bottom: 1px solid #eee;
    }
    tbody tr:nth-child(even) {
      background: #fafafa;
    }
    tbody td {
      padding: 10px 14px;
      font-size: 0.85rem;
      color: #444;
    }
    tbody td.title-cell {
      color: #26784b;
    }
    tbody td.title-cell:hover {
      text-decoration: underline;
      cursor: pointer;
    }
    /* í…Œì´ë¸” ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼ */
    .table-container::-webkit-scrollbar {
      width: 6px;
    }
    .table-container::-webkit-scrollbar-thumb {
      background-color: rgba(0,0,0,0.1);
      border-radius: 4px;
    }
    .table-container::-webkit-scrollbar-track {
      background: transparent;
    }

    /* ==============================================
       9. í‘¸í„°
       ============================================== */
    .footer {
      text-align: center;
      margin-top: 32px;
      margin-bottom: 20px;
      color: #a5b199;
      font-size: 0.95rem;
    }

    /* ==============================================
       10. ë°˜ì‘í˜•(Mobile) ì²˜ë¦¬
       ============================================== */
    @media (max-width: 900px) {
      .main-card {
        width: 95vw;
      }
      .notice-bar,
      .cards-row,
      .button-row {
        width: 95%;
      }
      .button-row {
        gap: 12px;
      }
      .cards-row {
        flex-direction: column;
        gap: 16px;
      }
      .notice-list {
        width: 90vw;
      }
      .table-container {
        max-height: 240px; /* ëª¨ë°”ì¼ ì‹œ ì•½ 5í–‰ */
      }
      table {
        min-width: 500px;
      }
      .cards-row {
        margin-top: 24px;
      }
      .my-collection-section {
        width: 95%;
      }
    }
    @media (max-width: 600px) {
      .main-card {
        width: 100vw;
        border-radius: 0;
      }
      .hero-image-wrapper img {
        border-radius: 0;
      }
      .button-row {
        flex-direction: column;
        gap: 12px;
      }
      .cards-row {
        gap: 12px;
      }
      .green-btn {
        height: 48px;
        font-size: 1.1rem;
      }
      .nav-links {
        gap: 16px;
      }
      .notice-list {
        width: 100vw;
      }
      .table-container {
        max-height: 200px; /* ì‘ì€ í™”ë©´ì—ì„œ 4~5í–‰ ì •ë„ */
      }
      table {
        min-width: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="main-card">

    <!-- 1) ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
    <nav class="nav">
      <div class="nav-logo">
        <img src="logo_main.png" alt="ìˆ˜í•™ë¬¸ì œì€í–‰ ë¡œê³ " />
        <span class="logo-text">ìˆ˜í•™ì§€ë‹ˆ</span>
      </div>
      <div class="nav-links" id="navLinks" style="display: flex; align-items: center; gap: 28px;">
        <a href="contact.html" class="nav-link">ë¬¸ì˜í•˜ê¸°</a>
        <a href="login.html" class="nav-link" id="loginLink">ë¡œê·¸ì¸</a>
        <!-- í”„ë¡œí•„ ë²„íŠ¼ë§Œ ì•„ì´ì½˜ (ë³¼ë¡ íš¨ê³¼) -->
        <button class="menu-btn" id="profileBtn" title="í”„ë¡œí•„" type="button">
          <img src="profile_icon.png" class="menu-icon" alt="í”„ë¡œí•„" style="width:28px;height:28px;">
        </button>
      </div>
    </nav>

    <!-- 2) íˆì–´ë¡œ ì´ë¯¸ì§€ + ì˜¤ë²„ë ˆì´ í…ìŠ¤íŠ¸ -->
    <div class="hero-image-wrapper">
      <div class="hero-text">
        <h1>í˜ì‹ ì ì¸ ìˆ˜í•™ ë¬¸ì œì€í–‰<br />ì˜¤ì‹  ê±¸ í™˜ì˜í•©ë‹ˆë‹¤!</h1>
        <p>ìˆ˜í•™êµìœ¡ì˜ ë””ì§€í„¸ ì „í™˜, ë¬¸ì œì§‘ ì œì‘ì´<br />ëª¨ë“  ê³¼ì •ì„ í•œ ë²ˆì—!</p>
      </div>
      <img src="ë°°ê²½.png" alt="ì—¬ì„± ì¼ëŸ¬ìŠ¤íŠ¸" />
    </div>

    <!-- 3) ì´ˆë¡ìƒ‰ ë²„íŠ¼ 4ê°œ -->
    <div class="button-row">
      <!-- ë²„íŠ¼ 1: ë¬¸ì œì€í–‰ â†’ problems.html -->
      <a href="folders.html" class="green-btn">
       <i class="fas fa-book-open btn-icon"></i>
       ë¬¸ì œì€í–‰
      </a>

      <!-- ë²„íŠ¼ 2: ë‚´ë¬¸ì œì§€ â†’ my_collection.html -->
      <a href="my_collection.html" class="green-btn">
       <i class="fas fa-file-alt btn-icon"></i>
       ë‚´ë¬¸ì œì§€
     </a>

      <!-- ë²„íŠ¼ 3: í•™êµê¸°ì¶œ â†’ school_archive.html -->
      <a href="middle.html" class="green-btn">
       <i class="fas fa-school btn-icon"></i>
       í•™êµê¸°ì¶œ
     </a>

      <!-- ë²„íŠ¼ 4: ê³µì§€ì‚¬í•­ â†’ notice.html -->
      <a href="notice.html" class="green-btn" id="notice-button">
       <i class="fas fa-bullhorn btn-icon"></i>
       ê³µì§€ì‚¬í•­
     </a>
    </div>

    <!-- 4) ë…¸ë€ ê³µì§€ë°” (ìŠ¬ë¼ì´ë“œ + ë“œë¡­ë‹¤ìš´) -->
    <div class="notice-bar">
      <svg
        width="22"
        height="22"
        viewBox="0 0 22 22"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <circle cx="11" cy="11" r="11" fill="#FDCA1B"/>
        <rect x="9" y="6" width="4" height="10" rx="2" fill="white"/>
        <rect x="8" y="10" width="6" height="2" rx="1" fill="white"/>
      </svg>
      <!-- ìŠ¬ë¼ì´ë“œë  ê³µì§€ ì˜ì—­ -->
      <div id="notice-container">
        <a id="current-notice" href="notice.html">ìµœì‹  ê³µì§€: ...</a>
      </div>
      <!-- + í† ê¸€ ë²„íŠ¼ -->
      <button id="notice-toggle" class="notice-toggle">+</button>
      <!-- ë“œë¡­ë‹¤ìš´ ë¦¬ìŠ¤íŠ¸ -->
      <ul id="notice-list" class="notice-list">
        <!-- JSì—ì„œ 5ê°œ ê³µì§€ë¥¼ ì±„ì›Œë„£ì„ ì˜ˆì • -->
      </ul>
    </div>

    <!-- 5) ì„œë¹„ìŠ¤ ì¹´ë“œ 3ê°œ (PNG ì•„ì´ì½˜ ì ìš©) -->
    <div class="cards-row">
      <!-- ì¹´ë“œ 1: ë¬¸ì œì€í–‰ ì•ˆë‚´ â†’ problem_bank_info.html -->
      <a href="problem_bank_info.html" class="svc-card">
        <div class="svc-title">
          <img src="ë¬¸ì œì€í–‰ì•ˆë‚´.png" alt="ë¬¸ì œì€í–‰ ì•ˆë‚´ ì•„ì´ì½˜" class="svc-icon" />
          <strong>ë¬¸ì œì€í–‰ ì•ˆë‚´</strong>
        </div>
        <div class="svc-desc">
          ê¸°ì¶œë¬¸ì œ, ë””ìì¸ í™•ì¸<br />
          ìì—°ìŠ¤ëŸ¬ìš´ UI
        </div>
      </a>

      <!-- ì¹´ë“œ 2: ë¬¸ì œì§€ ë§Œë“¤ê¸° íŠœí† ë¦¬ì–¼ â†’ tutorial.html -->
      <a href="tutorial.html" class="svc-card">
        <div class="svc-title">
          <img src="ë¬¸ì œì§€íŠœí† ë¦¬ì–¼.png" alt="ë¬¸ì œì§€ íŠœí† ë¦¬ì–¼ ì•„ì´ì½˜" class="svc-icon" />
          <strong>ë¬¸ì œì§€ ë§Œë“¤ê¸° íŠœí† ë¦¬ì–¼</strong>
        </div>
        <div class="svc-desc">
          í˜•ì‹ ë‚´ì—­ëª©ë¡ ë‚´ ë§ˆìŒëŒ€ë¡œ<br />
          ë¬¸ì œ ë§Œë“¤ê¸°
        </div>
      </a>

      <!-- ì¹´ë“œ 3: ì´ìš©í›„ê¸° â†’ reviews.html -->
      <a href="reviews.html" class="svc-card">
        <div class="svc-title">
          <img src="ì´ìš©í›„ê¸°.png" alt="ì´ìš©í›„ê¸° ì•„ì´ì½˜" class="svc-icon" />
          <strong>ì´ìš©í›„ê¸°</strong>
        </div>
        <div class="svc-desc">
          ì‚¬ëŒë“¤ì˜ ì´ìš©í›„ê¸°ë¥¼ ë³´ê³ <br />
          ì‚¬ìš©íŒë„ í™•ì¸í•´ìš”.
        </div>
      </a>
    </div>

    <!-- 6) â€˜ë‚´ ë¬¸ì œì§€â€™ ì„¹ì…˜ (ì„œë¹„ìŠ¤ ì¹´ë“œ ì•„ë˜ë¡œ ì›ìƒë³µêµ¬) -->
    <div class="my-collection-section">
      <!-- 6-1) ì„¹ì…˜ í—¤ë” -->
      <div class="my-collection-header">
        <h2>ë‚´ ë¬¸ì œì§€ <span style="color:#27a267;">FREE</span></h2>
        <a href="my_collection.html">
          ë°”ë¡œê°€ê¸° &gt;
        </a>
      </div>

      <!-- 6-2) í¸ì§‘ì¤‘/ì¶œì œí•œ ë¬¸ì œì§€ ê°œìˆ˜ -->
      <div class="counter-row">
        <div class="counter-item">
          <span class="count-num" id="editing-count">159</span>
          <span class="count-label">í¸ì§‘ì¤‘ ë¬¸ì œì§€</span>
        </div>
        <div class="counter-item">
          <span class="count-num" id="published-count">1853</span>
          <span class="count-label">ì¶œì œí•œ ë¬¸ì œì§€</span>
          <span class="badge">15+</span>
        </div>
      </div>

      <!-- 6-3) ì‹œí—˜ì§€ ëª©ë¡ í…Œì´ë¸” -->
      <div class="table-container">
        <table id="problem-table">
          <thead>
            <tr>
              <th data-key="title">ì œëª©</th>
              <th data-key="count">ë¬¸ì œìˆ˜</th>
              <th data-key="difficulty">í‰ê· ë‚œì´ë„</th>
              <th data-key="date">ìƒì„±ì¼ì</th>
            </tr>
          </thead>
          <tbody>
            <!-- JSì—ì„œ ìµœëŒ€ 20ê°œ í–‰ì„ ì±„ì›Œë„£ìŠµë‹ˆë‹¤. -->
          </tbody>
        </table>
      </div>
    </div>
    <!-- â€˜ë‚´ ë¬¸ì œì§€â€™ ì„¹ì…˜ ë -->

    <!-- 7) í‘¸í„° -->
    <div class="footer">
      Â© 2024 MarkBank. All rights reserved.
    </div>
  </div>

  <!-- ==============================================
       8. ê³µì§€ ìŠ¬ë¼ì´ë“œ, ë“œë¡­ë‹¤ìš´ & â€˜ë‚´ ë¬¸ì œì§€â€™ í…Œì´ë¸” ìŠ¤í¬ë¦½íŠ¸
       ============================================== -->
  <script>
function formatDate(iso) {
  if (!iso) return '';
  return iso.slice(0, 10).replace(/-/g, '.');
}

let notices = [];
let currentIndex = 0;

const currentNoticeEl = document.getElementById('current-notice');
const noticeListEl    = document.getElementById('notice-list');
const toggleBtn       = document.getElementById('notice-toggle');

// ê³µì§€ì‚¬í•­ DBì—ì„œ ë¶ˆëŸ¬ì˜¤ê¸° í•¨ìˆ˜
async function fetchNotices() {
  try {
    const res = await fetch('/api/notices');
    const list = await res.json();
    notices = list.slice(0, 5).map(item => ({
      text: `${formatDate(item.date)}: ${item.title}`,
      link: `notice.html#${item.id}`,
    }));
    currentIndex = 0;
    updateCurrentNotice();
    populateNoticeList();
  } catch (e) {
    notices = [{ text: 'ê³µì§€ì‚¬í•­ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.', link: 'notice.html' }];
    currentIndex = 0;
    updateCurrentNotice();
    populateNoticeList();
  }
}

function updateCurrentNotice() {
  if (!notices.length) {
    currentNoticeEl.textContent = 'ê³µì§€ ì—†ìŒ';
    currentNoticeEl.href = 'notice.html';
    return;
  }
  currentNoticeEl.textContent = notices[currentIndex].text;
  currentNoticeEl.href        = notices[currentIndex].link;
}

function populateNoticeList() {
  noticeListEl.innerHTML = '';
  notices.forEach(item => {
    const li = document.createElement('li');
    const a = document.createElement('a');
    a.textContent = item.text;
    a.href = item.link;
    a.addEventListener('click', () => {
      noticeListEl.style.display = 'none';
    });
    li.appendChild(a);
    noticeListEl.appendChild(li);
  });
}

function slideNotice() {
  if (!notices.length) return;
  currentIndex = (currentIndex + 1) % notices.length;
  updateCurrentNotice();
}
function adjustDropdownWidth() {
  noticeListEl.style.width = '400px';
}

toggleBtn.addEventListener('click', (e) => {
  e.stopPropagation();
  if (noticeListEl.style.display === 'block') {
    noticeListEl.style.display = 'none';
  } else {
    adjustDropdownWidth();
    noticeListEl.style.display = 'block';
  }
});
document.addEventListener('click', (e) => {
  if (!toggleBtn.contains(e.target) && !noticeListEl.contains(e.target)) {
    noticeListEl.style.display = 'none';
  }
});
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // 2) â€˜ë‚´ ë¬¸ì œì§€â€™ í…Œì´ë¸”: ë°ì´í„° ì €ì¥ & ì •ë ¬ ê¸°ëŠ¥
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    // ì˜ˆì‹œ ë°ì´í„° (ìµœëŒ€ 20ê°œ) â†’ ì‹¤ì œë¡œëŠ” ì‚¬ìš©ìê°€ ë§Œë“ /í¸ì§‘ ì¤‘ì¸ ë°ì´í„°ë¥¼ ì„œë²„ë‚˜
    // localStorage ì—ì„œ ë°›ì•„ì™€ì•¼ í•©ë‹ˆë‹¤. ì—¬ê¸°ì„œëŠ” ì˜ˆì‹œë¡œ ì¤€ë¹„í•´ë‘ .
    const sampleData = [
      { title: '25 1í•™ê¸°ê¸°ë§ í•„ìˆ˜ìœ í˜• ê²€ë‹¨',       count: 0,   difficulty: 0.00, date: '2025-05-24' },
      { title: '25ë…„ 1í•™ê¸°ê¸°ë§ ì¤‘ëŒ€ë‹¨ì› í•„ìˆ˜ìœ í˜• (1)', count: 168, difficulty: 3.67, date: '2025-05-24' },
      { title: '.',                                count: 0,   difficulty: 0.00, date: '2025-05-21' },
      { title: '2023ë…„ ë§ˆì „ê³ 1',                     count: 4,   difficulty: 3.75, date: '2025-05-02' },
      { title: 'ì§ì „ë³´ê°• FINAL TEST (êµê³¼ì„œ1íšŒ)',     count: 0,   difficulty: 0.00, date: '2025-04-27' },
      { title: 'ì‹ ì‚¬ê³  ìˆ˜í•™1 êµê³¼ì„œ',                  count: 0,   difficulty: 0.00, date: '2025-04-27' },
      { title: 'ì„ì‹œ ì‹œí—˜ì§€ A',                      count: 12,  difficulty: 4.20, date: '2025-04-20' },
      { title: 'ì¤‘í•™êµ 2í•™ë…„ ê¸°ë§ ê¸°ì¶œ ëª¨ìŒ',           count: 40,  difficulty: 3.50, date: '2025-04-15' },
      { title: 'ê³ 3 ìˆ˜ëŠ¥ ëŒ€ë¹„ ë¬¸ì œ ì„¸íŠ¸',              count: 25,  difficulty: 4.50, date: '2025-04-10' },
      { title: 'SAT ìœ í˜•ë³„ ëª¨ì˜ê³ ì‚¬',                 count: 30,  difficulty: 4.10, date: '2025-04-05' },
      { title: 'ì„œìš¸ëŒ€ ìˆ˜ë¦¬ë…¼ìˆ  ëŒ€ë¹„',                 count: 18,  difficulty: 4.80, date: '2025-04-01' },
      { title: 'IB ìˆ˜í•™ SL ê¸°ì¶œ ëª¨ìŒ',                count: 22,  difficulty: 4.30, date: '2025-03-25' },
      { title: 'ì˜ì¬ê³  ê²½ì‹œëŒ€íšŒ ëª¨ìŒ',                 count: 15,  difficulty: 4.00, date: '2025-03-20' },
      { title: 'ëª¨í‰ 3ì›” ëª¨ì˜ê³ ì‚¬',                   count: 25,  difficulty: 3.90, date: '2025-03-15' },
      { title: 'ëª¨í‰ 6ì›” ëª¨ì˜ê³ ì‚¬',                   count: 25,  difficulty: 3.95, date: '2025-03-10' },
      { title: 'ë¹„ìƒêµìœ¡ ìˆ˜ëŠ¥íŠ¹ê°• ê¸°ì¶œ',               count: 20,  difficulty: 4.10, date: '2025-03-05' },
      { title: 'ììŠµì„œ ì—°ìŠµë¬¸ì œ',                    count: 8,   difficulty: 3.20, date: '2025-03-01' },
      { title: 'ê¸°ì¶œë¬¸ì œ ì€í–‰ A',                   count: 50,  difficulty: 3.80, date: '2025-02-25' },
      { title: 'ì¤‘ë“± ìˆ˜í•™ ì˜¬ë¦¼í”¼ì•„ë“œ',                count: 30,  difficulty: 4.40, date: '2025-02-20' },
      { title: 'ê³ 1 ë‚´ì‹  ëŒ€ë¹„ ë¬¸ì œ',                  count: 12,  difficulty: 3.60, date: '2025-02-15' }
    ];

    // localStorage í‚¤ ì´ë¦„
    const STORAGE_KEY = 'myProblemSheets';

    // ì €ì¥ëœ ë°ì´í„°ê°€ ìˆìœ¼ë©´ ê°€ì ¸ì˜¤ê³ , ì—†ìœ¼ë©´ sampleData ë¡œ ì´ˆê¸°í™”
    function loadStoredData() {
      const stored = localStorage.getItem(STORAGE_KEY);
      if (stored) {
        try {
          return JSON.parse(stored);
        } catch (e) {
          console.error('ì €ì¥ëœ ë°ì´í„° íŒŒì‹± ì‹¤íŒ¨:', e);
        }
      }
      // ì €ì¥ëœ ë°ì´í„°ê°€ ì—†ê±°ë‚˜ íŒŒì‹± ì˜¤ë¥˜ ì‹œ sampleData ë¥¼ ì €ì¥ í›„ ë°˜í™˜
      localStorage.setItem(STORAGE_KEY, JSON.stringify(sampleData));
      return [...sampleData];
    }

    // ë°ì´í„° ì—…ë°ì´íŠ¸ ì‹œ localStorage ì— ë‹¤ì‹œ ì €ì¥
    function saveData(dataArray) {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(dataArray));
    }

    // í˜„ì¬ í™”ë©´ì— í‘œì‹œí•  ë°ì´í„° ë°°ì—´
    let currentData = loadStoredData();

    const tbody   = document.querySelector('#problem-table tbody');
    const headers = document.querySelectorAll('#problem-table thead th');

    // ë‚ ì§œ ë¹„êµìš© í—¬í¼
    function parseDate(str) {
      const [y, m, d] = str.split('-').map(Number);
      return new Date(y, m - 1, d);
    }

    // í…Œì´ë¸” ë Œë”ë§: ìµœëŒ€ 20ê°œ, í™”ë©´ì—” 6ê°œë§Œ ë³´ì´ë„ë¡ ìŠ¤í¬ë¡¤ í™œì„±í™”
    function renderTable() {
      tbody.innerHTML = '';
      const slice = currentData.slice(0, 20);
      slice.forEach(row => {
        const tr = document.createElement('tr');

        // ì œëª© ì…€
        const tdTitle = document.createElement('td');
        tdTitle.className = 'title-cell';
        tdTitle.textContent = row.title;
        tdTitle.addEventListener('click', () => {
          // ì‹œí—˜ì§€ ì œëª© í´ë¦­ ì‹œ ìƒì„¸ í˜ì´ì§€(ì˜ˆ: my_collection.html)ë¡œ ì´ë™
          window.location.href = `my_collection.html?title=${encodeURIComponent(row.title)}`;
        });
        tr.appendChild(tdTitle);

        // ë¬¸ì œìˆ˜ ì…€
        const tdCount = document.createElement('td');
        tdCount.textContent = row.count;
        tr.appendChild(tdCount);

        // í‰ê·  ë‚œì´ë„ ì…€
        const tdDiff = document.createElement('td');
        tdDiff.textContent = row.difficulty.toFixed(2);
        tr.appendChild(tdDiff);

        // ìƒì„±ì¼ì ì…€
        const tdDate = document.createElement('td');
        tdDate.textContent = row.date;
        tr.appendChild(tdDate);

        tbody.appendChild(tr);
      });
    }

    // ì •ë ¬ ìƒíƒœ ì €ì¥
    let sortState = {
      key: null,
      direction: 1 // 1: ì˜¤ë¦„ì°¨ìˆœ, -1: ë‚´ë¦¼ì°¨ìˆœ
    };

    // ì •ë ¬ í•¨ìˆ˜
    function sortBy(key) {
      if (sortState.key === key) {
        sortState.direction *= -1; // ê°™ì€ í‚¤ í´ë¦­ ì‹œ ë°©í–¥ í† ê¸€
      } else {
        sortState.key = key;
        sortState.direction = 1;   // ìƒˆ í‚¤ í´ë¦­ ì‹œ ì˜¤ë¦„ì°¨ìˆœ ì´ˆê¸°í™”
      }

      currentData.sort((a, b) => {
        let valA = a[key], valB = b[key];
        if (key === 'date') {
          return sortState.direction * (parseDate(valA) - parseDate(valB));
        }
        if (key === 'title') {
          return sortState.direction * valA.localeCompare(valB);
        }
        // ìˆ«ì í•„ë“œ
        return sortState.direction * (valA - valB);
      });

      // ì €ì¥ëœ ìˆœì„œ ì—…ë°ì´íŠ¸
      saveData(currentData);

      // í—¤ë” ì•„ì´ì½˜ í† ê¸€
      headers.forEach(th => {
        th.classList.remove('sort-asc', 'sort-desc');
        if (th.dataset.key === key) {
          th.classList.add(sortState.direction === 1 ? 'sort-asc' : 'sort-desc');
        }
      });

      renderTable();
    }

    // í—¤ë” í´ë¦­ ì´ë²¤íŠ¸ ë“±ë¡
    headers.forEach(th => {
      th.addEventListener('click', () => {
        sortBy(th.dataset.key);
      });
    });

    // ì´ˆê¸° ë Œë”
    async function checkLoginStatus() {
      const navLinks = document.getElementById('navLinks');

      try {
        const res = await fetch('/check-auth', { credentials: 'include' });
        const result = await res.json();

        if (result.isLoggedIn) {
          // ë¡œê·¸ì¸ ìƒíƒœë©´: ë¬¸ì˜í•˜ê¸° + ë¡œê·¸ì•„ì›ƒ + í”„ë¡œí•„
          navLinks.innerHTML = `
            <a href="contact.html" class="nav-link">ë¬¸ì˜í•˜ê¸°</a>
            <a href="#" class="nav-link" id="logoutBtn">ë¡œê·¸ì•„ì›ƒ</a>
            <button class="menu-btn" id="profileBtn" title="í”„ë¡œí•„" type="button">
              <img src="profile_icon.png" class="menu-icon" alt="í”„ë¡œí•„" style="width:28px;height:28px;">
            </button>
          `;
          document.getElementById('logoutBtn').addEventListener('click', async () => {
            await fetch('/logout', { credentials: 'include' });
            window.location.href = 'login.html';
          });
        } else {
          // ë¹„ë¡œê·¸ì¸ ìƒíƒœë©´: ë¬¸ì˜í•˜ê¸° + ë¡œê·¸ì¸ + í”„ë¡œí•„
          navLinks.innerHTML = `
            <a href="contact.html" class="nav-link">ë¬¸ì˜í•˜ê¸°</a>
            <a href="login.html" class="nav-link" id="loginLink">ë¡œê·¸ì¸</a>
            <button class="menu-btn" id="profileBtn" title="í”„ë¡œí•„" type="button">
              <img src="profile_icon.png" class="menu-icon" alt="í”„ë¡œí•„" style="width:28px;height:28px;">
            </button>
          `;
        }

        // ğŸ’¡ í”„ë¡œí•„ ë²„íŠ¼ í•­ìƒ ì´ë²¤íŠ¸ ë“±ë¡!
        const profileBtn = document.getElementById('profileBtn');
        if (profileBtn) {
          profileBtn.addEventListener('click', function() {
            window.location.href = 'profile.html';
          });
        }

      } catch (e) {
        console.error('ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸ ì˜¤ë¥˜:', e);
        navLinks.innerHTML = `
          <a href="contact.html" class="nav-link">ë¬¸ì˜í•˜ê¸°</a>
          <a href="login.html"  class="nav-link">ë¡œê·¸ì¸</a>
          <button class="menu-btn" id="profileBtn" title="í”„ë¡œí•„" type="button">
            <img src="profile_icon.png" class="menu-icon" alt="í”„ë¡œí•„" style="width:28px;height:28px;">
          </button>
        `;
        // ğŸ’¡ ì˜ˆì™¸ ìƒí™©ì—ì„œë„ í”„ë¡œí•„ ë²„íŠ¼ ì´ë²¤íŠ¸ ë“±ë¡
        const profileBtn = document.getElementById('profileBtn');
        if (profileBtn) {
          profileBtn.addEventListener('click', function() {
            window.location.href = 'profile.html';
          });
        }
      }
    }

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì‹¤í–‰
    document.addEventListener('DOMContentLoaded', () => {
    fetchNotices();              // ê³µì§€ ë¶ˆëŸ¬ì˜¤ê¸°
   adjustDropdownWidth();
   setInterval(slideNotice, 10000);

    renderTable();               // í‘œ ë Œë”ë§
    checkLoginStatus();          // ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸
    }); 
    document.addEventListener('DOMContentLoaded', function() {
      const profileBtn = document.getElementById('profileBtn');
      if (profileBtn) {
        profileBtn.addEventListener('click', function() {
          window.location.href = 'profile.html';
        });
      }
    });

  </script>
</body>
</html>
