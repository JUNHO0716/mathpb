<!DOCTYPE html>
<html lang="ko">
<head>
  <meta name="robots" content="noindex, nofollow">
  <meta charset="UTF-8">
  <title>ëŒ€ì‹œë³´ë“œ</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap" rel="stylesheet">
  <link rel="icon" type="image/png" href="/favicon.png" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700;900&display=swap" rel="stylesheet">
  <script src="/toss/v2.js"></script>

  <style>
    :root{
      --purple-bg:#ffffff;
      --purple-dk:#ffffff;
      --btn-bg:#FDC512;
      --btn-bg-hov:#D9A90F; 
      --border-light:#e9e9e9;      /* ğŸ†• ì•„ì£¼ ì˜…ì€ íšŒìƒ‰ */
      --text-main:#111;
      --text-sub:#5f5f5f;
    }

    * {
      box-sizing: border-box;
      font-family: 'Noto Sans KR', sans-serif;
    }

    body {
      margin: 0;
      display: flex;
      height: 100vh;
      background: #f5f6fa;
    }

    /* ===== Fade-in + Slide from Left ===== */
    .fade-in-left {
      opacity: 0;
      transform: translateX(-30px);
      animation: fadeInLeft 0.6s ease forwards;
    }

    @keyframes fadeInLeft {
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    /* ===== ì‚¬ì´ë“œë°” ìŠ¤íƒ€ì¼ ===== */
    .sidebar {
      width: 190px;
      background: #0f0f0f;
      color: white;
      transition: width 0.3s;
      display: flex;
      flex-direction: column;
      padding-top: 20px;
      align-items: stretch; 
      overflow-x: hidden;
    }

    .menu-list {
    display: flex;
    flex-direction: column;
    align-items: flex-start;   /* ë©”ë‰´ë“¤ì€ í•­ìƒ ìœ„ì—ì„œë¶€í„° ìŒ“ì´ê²Œ */
    width: 100%;               /* ë©”ë‰´ ì•„ì´í…œ í­ 100% */
  }

    .sidebar.collapsed {
      width: 80px;
    }

    .logo {
      height: 36px;
      margin-bottom: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      width: 100%;
    }

    .logo-text {
      font-size: 20px;
      font-weight: bold;
      transition: opacity 0.3s;
      color: #FFD400;
      opacity: 1;
    }

    .logo-img {
      position: absolute;
      width: 30px;
      height: 30px;
      opacity: 0;
      transition: opacity 0.3s;
    }

    .sidebar.collapsed .logo-text {
      opacity: 0;
    }

    .sidebar.collapsed .logo-img {
      opacity: 1;
    }

    .menu-item {
      position: relative;
      display: flex;
      align-items: center;
      padding: 15px 17px;
      cursor: pointer;
      transition: background 0.2s;
      width: 100%;
      opacity: 0;
      transform: translateX(-30px);
      margin-bottom: 12px;
    }

    .menu-item .active-bg {
      position: absolute;
      left: 12px;      /* í°ìƒ‰ ì‚¬ê°í˜• ì¢Œìš° ì—¬ë°±(ì¡°ì ˆ ê°€ëŠ¥) */
      right: 12px;
      top: 3px;        /* ìœ„/ì•„ë˜ ì—¬ë°± */
      bottom: 3px;
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 2px 12px rgba(248, 246, 246, 0.133);
      z-index: 0;
      opacity: 0;     /* ê¸°ë³¸ íˆ¬ëª… */
      transition: opacity 0.18s;
    }
    .sidebar.collapsed .menu-item.active .active-bg {
      opacity: 1;
    }
    
    .menu-item.active .active-bg {
        opacity: 1;
      }

      .menu-item img.menu-icon {
      position: relative;
      z-index: 2;
    }

    .menu-item.show {
      animation: fadeInLeft 0.5s ease forwards;
    }

    .menu-item:hover {
      background: #1e1e1e;
    }

    .menu-item i,
    .menu-item span:not(.active-bg) {
      position: relative;
      z-index: 1;
    }
    .menu-item span:not(.active-bg) {
      display: inline-block;          /* í­ ì œì–´í•˜ë ¤ë©´ inline-block */
      max-width: 140px;               /* ì¶©ë¶„íˆ í° ê°’(í…ìŠ¤íŠ¸ ê¸¸ì´ë³´ë‹¤ ì—¬ìœ  ìˆê²Œ) */
      overflow: hidden;
      white-space: nowrap;
      font-size: 0.8rem !important;
      opacity: 1;
      transition:
        max-width .25s ease .30s,     /* í­ì€ 0.30s ë’¤ì— ì—´ë¦¬ë©° 0.25s ë™ì•ˆ */
        opacity   .25s ease .30s;     /* ë™ì¼ íƒ€ì´ë°ìœ¼ë¡œ í˜ì´ë“œ-ì¸ */
    }

    .sidebar.collapsed .menu-item span:not(.active-bg) {
      max-width: 0;                   /* í­ 0 â†’ ì•„ì´ì½˜ ê³µê°„ë§Œ ë‚¨ìŒ */
      opacity: 0;                     /* íˆ¬ëª… */
      transition:
        max-width .20s ease 0s,       /* ì¦‰ì‹œ ì ‘íˆë©° 0.2s ë™ì•ˆ ë‹«í˜ */
        opacity   .05s ease 0s;       /* ë°”ë¡œ ì‚¬ë¼ì§ */
    }

    /* í­ì´ ë‹¤ ëŠ˜ì–´ë‚œ ë’¤ì— ê¸€ì”¨ ë‚˜íƒ€ë‚  ìˆ˜ ìˆë„ë¡ ì§€ì—° */
    .sidebar.expanded .menu-item span:not(.active-bg) {
      position: static;                /* ë‹¤ì‹œ ë ˆì´ì•„ì›ƒì— ì°¸ì—¬ */
      opacity: 1;                      /* ì„œì„œíˆ ë‚˜íƒ€ë‚¨ */
      transition: opacity .22s .05s;   /* 0.05s ì§€ì—° í›„ í˜ì´ë“œ-ì¸ */
    }

    .sidebar.collapsed .menu-item img.menu-icon {
      display: inline-block !important;
    }

    .menu-button {
      width: 20px;
      height: 20px;
      cursor: pointer;
      position: relative;
      background: none;
      border: none;
      outline: none;
      margin: 20px auto 20px auto;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .menu-button span {
      display: block;
      position: absolute;
      background-color: #fff;
      border-radius: 2px;
      transition: all 0.4s cubic-bezier(.7,.2,.17,1.3);
    }

    .menu-button span:nth-child(1),
    .menu-button span:nth-child(2),
    .menu-button span:nth-child(3) {
      width: 100%;
      height: 2px;   /* ë‘ê»˜ ì ˆë°˜ */
      left: 0;
    }

    .menu-button span:nth-child(1) { top: 2px; }
    .menu-button span:nth-child(2) { top: 6.5px; }
    .menu-button span:nth-child(3) { top: 11px; }

    .menu-button.active span {
      width: 2px;
      height: 100%;
      top: 0;
    }

    .menu-button.active span:nth-child(1) { left: 0px; }
    .menu-button.active span:nth-child(2) { left: 6.5px; }
    .menu-button.active span:nth-child(3) { left: 13px; }

    /* ===== ë©”ì¸ ì½˜í…ì¸  ===== */
    .main-content {
      flex-grow: 1;
      padding: 40px;
      opacity: 0;
      transform: translateX(-30px);
      animation: fadeInLeft 0.8s ease forwards;
      animation-delay: 0.3s;
    }

    .menu-item.active {
      color: #222;
      font-weight: 600;
      background: none;   /* ê¸°ì¡´ í°ë°°ê²½ ì§€ì›€ */
      box-shadow: none;   /* ê¸°ì¡´ ê·¸ë¦¼ì ì§€ì›€ */
      border-radius: 0;
    }

    .menu-item.active i {
      color: #4b39ef;
    }
    

    .menu-icon {
      width: 20px;
      height: 20px;
      margin-right: 15px;
      object-fit: contain;
      margin-left: 11px;
    }

    /* ===== Help FAB + Dropdown ===== */
    .help-container{position:fixed;bottom:24px;right:24px;z-index:999}
    .help-fab{width:46px;height:46px;border-radius:50%;border:none;background:#f8c900;color:#111;font-size:24px;cursor:pointer;box-shadow:0 8px 16px rgba(0,0,0,.2);transition:transform .15s}
    .help-fab:hover{transform:scale(1.06)}
    .help-menu{list-style:none;margin:0;padding:0;position:absolute;bottom:72px;right:0;background:#ffffff;width:280px;border-radius:12px;box-shadow:0 6px 20px rgba(0,0,0,.18);overflow:hidden;opacity:0;pointer-events:none;transform:translateY(10px);transition:all .25s}
    .help-menu.show{opacity:1;pointer-events:auto;transform:translateY(0)}
    .help-menu li{padding:14px 20px;font-size:14px;cursor:pointer;display:flex;gap:8px;align-items:center;transition:background .15s}
    .help-menu li:not(:last-child){border-bottom:1px solid #f0f0f0}
    .help-menu li:hover{background:#f7f7f7}
    .help-menu .badge{width:24px;height:24px;border-radius:50%;background:#eef0f4;display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:600;flex-shrink:0}

    /* â‘  sidebarëŠ” ì´ë¯¸ flex-column ì´ë¯€ë¡œ spacerì— flex-grow:1 */
    .spacer { flex-grow: 1; }

    /* â‘¡ ë¡œê·¸ì•„ì›ƒ ê¸€ì”¨ë„ ì ‘í ë•Œ ìˆ¨ê¸°ë ¤ë©´(ì„ íƒ) */
    .sidebar.collapsed .menu-item.logout span:not(.active-bg) {
      display: none;
    }

    /* â‘¢ í•˜ë‹¨ê³¼ ì¡°ê¸ˆ ë–¨ì–´ëœ¨ë¦¬ê³  ì‹¶ë‹¤ë©´ ì—¬ë°± ì£¼ê¸°(ì›í•˜ëŠ” ê°’) */
    .menu-item.logout { margin-bottom: 30px; }

    /* iframe ì „ìš© */
    #contentFrame{flex:1;border:none;width:100%;height:100%;}
    /* main-content ë¥¼ flex ì»¨í…Œì´ë„ˆë¡œ */
    .main-content{display:flex;padding:0;}

    /* â”€â”€â”€â”€â”€â”€ 1) í—¤ë” â”€â”€â”€â”€â”€â”€ */
      .page-header{
        min-width:980px;padding:8px 40px 10px;
        display:flex;align-items:center;justify-content:space-between;
        position:relative; background: #fff;
      }
      .header-titles h1{font-size:1.3rem;font-weight:900;color:var(--text-main);margin-bottom: 2px;}
      .sub-date{margin-top:4px;font-size:.7rem;font-weight:700;color:var(--text-sub);}

      .header-actions{display:flex;align-items:center;gap:16px;} /* ë²„íŠ¼ ê°„ê²© â†‘ */

      /* 1-a  ë²„íŠ¼ë“¤ */
      .action-btn{
        padding:6px 20px;border-radius:9999px;
        background:var(--btn-bg);color:#111;font-weight:700;
        font-size:.70rem;display:inline-flex;align-items:center;gap:8px;
        transition:.15s;text-decoration:none;
      }
      .action-btn i{font-size:.9rem;}
      .action-btn:hover{background:var(--btn-bg-hov);}
      /* ë²„íŠ¼ë¼ë¦¬ ì‚´ì§ ë„ìš°ê¸° */
      .action-btn+ .action-btn{margin-left:0;} 

      /* 1-b  í”„ë¡œí•„ */
      .user-wrapper{position:relative;}
      .user-box{
        display:flex;align-items:center;gap:14px;cursor:pointer; /* gap â†‘ */
      }
      .avatar{
        width:34px;height:34px;border-radius:50%;
        object-fit:cover;background:#ddd;
      }
      .user-name{
        font-size:0.8rem;font-weight:700;color:var(--text-main);
        white-space:nowrap;
      }
      .user-box i{font-size:.8rem;color:#888;transition:.2s;}

      .dropdown{
        position:absolute;right:0;top:calc(100% + 6px);
        min-width:160px;background:#fff;border:1px solid #eee;border-radius:10px;
        box-shadow:0 4px 14px rgba(0,0,0,.06);padding:8px 0;display:none;z-index:20;
      }
      .dropdown a{
        display:block;padding:10px 18px;font-size:.92rem;color:#333;
        text-decoration:none;white-space:nowrap;transition:.13s;
      }
      .dropdown a:hover{background:#f8f8f8;}

      .page-header::after{
      content:'';
      position:absolute;
      left:50%;                          /* ê°€ìš´ë° ê¸°ì¤€ */
      bottom:0;                          /* í—¤ë” ë§¨ ì•„ë˜ */
      transform:translateX(-50%);        /* ì •í™•í•œ ì¤‘ì•™ ì •ë ¬ */

      width:97%;                         /* â† ê¸¸ì´(=ì–‘ìª½ ì—¬ë°±) ì¡°ì ˆ í¬ì¸íŠ¸ */
      height:1px;                        /* ì„  êµµê¸° */
      background:var(--border-light);    /* ì„  ìƒ‰ìƒ */
      }

    .highlight {
      position: relative;
      display: inline-block;
    }

    .highlight::before {
      content: "";
      position: absolute;
      top: -4px;      /* ê¸€ì ìœ„ ìœ„ì¹˜ */
      left: 0;
      width: 30px;    /* ì„  ê¸¸ì´ */
      height: 5px;    /* ì„  êµµê¸° */
      background: #f8c900;  /* ë…¸ë€ìƒ‰ */
      border-radius: 2px;
    }

    .main-content {
      display: flex;
      flex-direction: column;   /* â† ì´ í•œ ì¤„ì´ ì—†ìœ¼ë©´ ì„¸ë¡œë¡œ ìŒ“ì´ì§€ ì•ŠìŠµë‹ˆë‹¤! */
      flex-grow: 1;
      padding: 0;
      overflow: hidden;
    }
    
    .user-box.loading * { visibility: hidden; }

    body.swal2-shown {
      height: 100% !important;
      overflow: hidden !important;
    }

.modal-overlay {
  display: none;
  position: fixed;
  z-index: 9999;
  top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(0,0,0,0.38);
  justify-content: center;
  align-items: center;
}
.modal-overlay.show {
  display: flex;
}
.modal-content {
  position: relative;
  width: 1150px;
  max-width: 95vw;
  background: #fff;
  border-radius: 10px;
  box-shadow: 0 8px 40px rgba(30,30,30,0.18);
  padding: 0;
  display: flex;
  flex-direction: column;
  align-items: stretch;
  overflow: hidden;
  min-height: 700px;
}
.close-modal {
  position: absolute;
  right: 16px;
  top: 10px;
  background: none;
  border: none;
  font-size: 2rem;
  color: #bbb;
  z-index: 2;
  cursor: pointer;
  transition: color .2s;
}
.close-modal:hover { color: #111; }
#paymentIframe {
  width: 100%;
  height: 800px;
  border: none;
  background: #fafbfc;
  border-radius: 0 0 18px 18px;
}

/* ===== ì•ˆë‚´ ëª¨ë‹¬ (Intro Modal) ===== */
.intro-overlay{position:fixed;inset:0;background:rgba(0,0,0,.38);display:none;align-items:center;justify-content:center;z-index:10000}
.intro-overlay.show{display:flex}
.intro-modal{width:min(920px,95vw);background:#fff;border-radius:18px;box-shadow:0 24px 80px rgba(0,0,0,.22);overflow:hidden;transform:translateY(8px);opacity:0;animation:introPop .28s ease-out .02s forwards}
@keyframes introPop{to{opacity:1;transform:translateY(0)}}

.intro-head{display:flex;gap:14px;align-items:center;padding:22px 24px;border-bottom:1px solid var(--border-light)}
.intro-badge{width:34px;height:34px;border-radius:10px;background:var(--btn-bg);display:flex;align-items:center;justify-content:center;font-weight:900;color:#111}
.intro-title{font-size:1.22rem;font-weight:900;color:#111;letter-spacing:-.2px}
.intro-sub{font-size:.92rem;color:#5f5f5f;margin-top:2px}

.intro-body{padding:18px 22px 8px}

.intro-callout{
  background:#fff8d8;border:1px dashed #f0cc4b;color:#6a5512;
  padding:10px 12px;border-radius:10px;font-size:.92rem;line-height:1.5;margin-bottom:12px
}

.intro-grid{display:grid;grid-template-columns:1fr;gap:12px}
@media (min-width:820px){.intro-grid{grid-template-columns:1fr 1fr}}

.intro-card{
  border:1px solid var(--border-light);border-radius:14px;background:#fff;padding:16px 16px 14px
}
.intro-card h4{margin:0 0 8px;font-size:1rem;color:#111}
.intro-card p{margin:0;font-size:.93rem;color:#555;line-height:1.55}
.intro-dot{display:inline-block;width:8px;height:8px;border-radius:50%;background:#FDC512;margin-right:8px;vertical-align:middle}

.intro-list{margin:8px 0 0;padding-left:0;list-style:none}
.intro-list li{margin:6px 0;color:#444;font-size:.93rem}
.intro-strong{font-weight:800;color:#111}

.intro-footer{display:flex;gap:10px;justify-content:flex-end;padding:14px 16px;border-top:1px solid var(--border-light);background:#fafafa}
.btn-ghost{background:#fff;border:1px solid #e8e8e8;border-radius:9999px;padding:9px 16px;font-weight:700;color:#333;cursor:pointer}
.btn-ghost:hover{background:#f7f7f7}
.btn-primary{background:var(--btn-bg);border:none;border-radius:9999px;padding:9px 18px;font-weight:800;color:#111;cursor:pointer}
.btn-primary:hover{background:var(--btn-bg-hov)}
.intro-close{position:absolute;top:10px;right:12px;border:none;background:none;font-size:1.6rem;color:#bbb;cursor:pointer}
.intro-close:hover{color:#111}

/* ----- intro-list: ì œëª© ì¤„ + ì„¤ëª… ì¤„ ë ˆì´ì•„ì›ƒ ----- */
.intro-list-dot li{margin:10px 0 12px}
.intro-list-head{display:flex;align-items:center;gap:8px;margin-bottom:6px}
.intro-list-desc{color:#555;font-size:.93rem;line-height:1.55;margin-left:16px}

/* ì (ë…¸ë€ ë™ê·¸ë¼ë¯¸) í¬ê¸° ì‚´ì§ í‚¤ì›€ */
.intro-list-dot .intro-dot{width:9px;height:9px}

.intro-note {
  font-size: 0.6rem;   /* ê¸°ë³¸ë³´ë‹¤ ì•½ 3pt ì •ë„ ì‘ê²Œ */
  color: #666;         /* ì—°í•œ íšŒìƒ‰ í†¤ */
  line-height: 1.5;
  margin-top: 6px;
}

#profileName {
  font-size:0.7rem;   /* ì›í•˜ëŠ” í¬ê¸° */
  font-weight:600;    /* ë‘ê»˜ */
  color:#444;         /* ìƒ‰ìƒ */
  margin:0;           /* h3 ê¸°ë³¸ ì—¬ë°± ì—†ì• ê¸° */
}


  </style>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>

  <div class="sidebar fade-in-left" id="sidebar">
    <div class="logo">
      <span class="logo-text">Mathbee</span>
      <img src="logo_m.png" alt="ë¡œê³ " class="logo-img">
    </div>
    <button class="menu-button" id="toggleBtn" onclick="toggleSidebarAnim()" aria-label="ì‚¬ì´ë“œë°” ì—´ê¸°/ë‹«ê¸°">
      <span></span>
      <span></span>
      <span></span>
    </button>
    <div class="menu-list">
    <div class="menu-item" id="menu1" data-url="home.html">
      <span class="active-bg"></span>
      <img class="menu-icon" src="main_home_w.png"
        data-icon-black="main_home_b.png" data-icon-white="main_home_w.png" alt="" />
      <span>ë©”ì¸í™ˆ</span>
    </div>
    <div class="menu-item" id="menu2" data-url="problem_bank.html">
      <span class="active-bg"></span>
      <img class="menu-icon" src="icon_book_w.png"
          data-icon-black="icon_book_b.png" data-icon-white="icon_book_w.png" alt="">
      <span>ë¬¸ì œì€í–‰</span>
    </div>
    <div class="menu-item" id="menu3" data-url="high.html">
      <span class="active-bg"></span>
      <img class="menu-icon" src="icon_school_w.png" 
        data-icon-black="icon_school_b.png" data-icon-white="icon_school_w.png" alt="" />
      <span>ë‚´ì‹ ê¸°ì¶œ ì‹œí—˜ì§€</span>
    </div>
    <div class="menu-item" id="menu4" data-url="bookcase.html">
      <span class="active-bg"></span>
      <img class="menu-icon" src="icon_bookcase_w.png" 
        data-icon-black="icon_bookcase_b.png" data-icon-white="icon_bookcase_w.png" alt="" />
      <span>ë‚´ ì±…ì¥</span>
    </div>
    <div class="menu-item" id="menu5" data-url="upload.html">
      <span class="active-bg"></span>
      <img class="menu-icon" src="icon_upload_w.png" 
        data-icon-black="icon_upload_b.png" data-icon-white="icon_upload_w.png" alt="" />
      <span>ì‹œí—˜ì§€ ìš”ì²­</span>
    </div>
     <div class="menu-item" id="menu6" data-url="notice.html">
      <span class="active-bg"></span>
      <img class="menu-icon" src="icon_notification_w.png" 
        data-icon-black="icon_notification_b.png" data-icon-white="icon_notification_w.png" alt="" />
      <span>ê³µì§€ì‚¬í•­</span>
    </div>
      <div class="menu-item" id="menu7" data-url="profile.html">
      <span class="active-bg"></span>
      <img class="menu-icon" src="icon_my_w.png" 
        data-icon-black="icon_my_b.png" data-icon-white="icon_my_w.png" alt="" />
      <span>ë‚´ ê³„ì •</span>
    </div>
  </div>
    <div class="spacer"></div>
    <div class="menu-item" id="menu8">
      <span class="active-bg"></span>
      <img class="menu-icon" src="icon_logout_w.png" 
        data-icon-black="icon_logout_b.png" data-icon-white="icon_logout_w.png" alt="" />
      <span>ë¡œê·¸ì•„ì›ƒ</span>
    </div>
  </div>

<div class="main-content" id="mainContent">
  <header class="page-header">
    <div class="header-titles">
      <h1 id="pageTitle"><span class="highlight">Ma</span>in home</h1>
      <div class="sub-date" id="todayTxt"></div>
    </div>
    <div class="header-actions">
      <a href="pricing.html" class="action-btn"><i class="fa-regular fa-credit-card"></i> ê²°ì œí•˜ê¸°</a>
      <a href="review_form.html" class="action-btn"><i class="fa-regular fa-pen-to-square"></i> í›„ê¸° ë‚¨ê¸°ê¸°</a>
      <div class="user-wrapper" id="userWrapper">
        <div class="user-box loading" id="userBox">
          <img alt="avatar" class="avatar" id="avatar">
          <h3 id="profileName">Guest</h3>
          <i class="fa-solid fa-chevron-down" id="arrowIcon"></i>
        </div>
        <div class="dropdown" id="dropdownMenu">
          <a href="profile.html">ë‚´ í”„ë¡œí•„</a>
          <a href="#" id="logoutBtn">ë¡œê·¸ì•„ì›ƒ</a>
          <a href="admin.html" id="goAdminPage" style="display:none;">ê´€ë¦¬ìí˜ì´ì§€</a>
        </div>
      </div>
    </div>
  </header>  <!-- â† â† â† ë°˜ë“œì‹œ ë‹«ëŠ”ë‹¤!! -->

  <iframe id="contentFrame" src="home.html"></iframe>
</div>

  <script>
    // ë‚ ì§œ í‘œì‹œ
    const wk=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];
    const mo=['January','February','March','April','May','June','July','August','September','October','November','December'];
    function setToday(){
      const t=new Date();
      document.getElementById('todayTxt').textContent =
        `${wk[t.getDay()]}  ${String(t.getDate()).padStart(2,'0')} ${mo[t.getMonth()]} ${t.getFullYear()}`;
    }

    let currentUser = null;
    
    /* ë¡œê·¸ì¸Â·í”„ë¡œí•„ ë°”ì¸ë”© + ê´€ë¦¬ì íŒë³„ */
    let IS_ADMIN=false;
    async function bindUser(){
      try{
        const res = await fetch('/check-auth?ts=' + Date.now(), {
          credentials: 'include', cache: 'no-store'
        });
        const d = await res.json();
        if(!d.isLoggedIn) return;

        const u = d.user || {};
        currentUser = u; // âœ… ì´ ì¤„ ì¶”ê°€!!! (ë”± ì´ê±°!)
        const displayId = u.email ? u.email.split('@')[0] : (u.name || 'Guest');

        document.getElementById('profileName').textContent = displayId;

        const avatarEl = document.getElementById('avatar');
        if (u.avatarUrl && u.avatarUrl.trim() !== "") {
          avatarEl.src = u.avatarUrl;
        } else {
          avatarEl.src = 'icon_my_b.png';
        }
        avatarEl.alt = displayId;

        document.getElementById('userBox').classList.remove('loading');
        // **ì—¬ê¸° ì¶”ê°€!**
        if (u.role === 'admin') {
        document.getElementById('goAdminPage').style.display = 'block';
      } else {
        document.getElementById('goAdminPage').style.display = 'none';
      }
      }catch(e){  
        console.error(e);
      }
    }

     // í”„ë¡œí•„ ë“œë¡­ë‹¤ìš´
    function initDropdown(){
      const box=document.getElementById('userBox');
      const menu=document.getElementById('dropdownMenu');
      const arrow=document.getElementById('arrowIcon');
      box.addEventListener('click',e=>{
        e.stopPropagation();
        const open=menu.style.display==='block';
        menu.style.display=open?'none':'block';
        arrow.style.transform=open?'rotate(0deg)':'rotate(180deg)';
      });
      document.addEventListener('click',e=>{
        if(!menu.contains(e.target)){
          menu.style.display='none';
          arrow.style.transform='rotate(0deg)';
        }
      });
    }

    document.addEventListener('DOMContentLoaded',()=>{
      setToday();
      initDropdown();
      bindUser();

      const sidebarLogout = document.getElementById('menu8');
      if(sidebarLogout) sidebarLogout.addEventListener('click', async ()=>{
        try {
          await fetch('/logout', {credentials:'include'});
          location.href = '/login.html';
        } catch(e){
          console.error('ë¡œê·¸ì•„ì›ƒ ì‹¤íŒ¨', e);
        }
      });
      const dropdownLogout = document.getElementById('logoutBtn');

      async function logout(){
        await fetch('/logout',{credentials:'include'});
        location.href = '/login.html';  // ë˜ëŠ” location.reload(); ì›í•˜ëŠ” ë°©ì‹ ì„ íƒ
      }

      if(sidebarLogout) sidebarLogout.addEventListener('click', logout);
      if(dropdownLogout) dropdownLogout.addEventListener('click', logout);

 // ê²°ì œ ëª¨ë‹¬ ê´€ë ¨
  const payBtn = document.querySelector('.action-btn[href="pricing.html"]');
  const paymentModal = document.getElementById('paymentModal');
  const paymentIframe = document.getElementById('paymentIframe');
  const closeModalBtn = document.getElementById('closeModalBtn');
  if (payBtn) {
    payBtn.addEventListener('click', function(e){
      e.preventDefault(); // ì´ ë¶€ë¶„ì´ ë§í¬ì˜ ê¸°ë³¸ ë™ì‘(í˜ì´ì§€ ì´ë™)ì„ ë§‰ê³  ìˆìŠµë‹ˆë‹¤.
      paymentModal.classList.add('show');
      paymentIframe.src = "pricing.html";
      document.body.style.overflow = "hidden";
    });
  }
  if (closeModalBtn) {
    closeModalBtn.addEventListener('click', function(){
      paymentModal.classList.remove('show');
      paymentIframe.src = "";
      document.body.style.overflow = "";
    });
  }
  // ëª¨ë‹¬ ë°”ê¹¥ í´ë¦­ ì‹œ ë‹«ê¸°
  paymentModal.addEventListener('click', function(e){
    if (e.target === paymentModal) {
      paymentModal.classList.remove('show');
      paymentIframe.src = "";
      document.body.style.overflow = "";
    }
  });
});
    
    window.addEventListener('message', function(event) {
      if (event.data && event.data.type === 'goNotice') {
        // ... ê¸°ì¡´ ì½”ë“œ ...
        document.querySelectorAll('.menu-item').forEach(i => {
          i.classList.remove('active');
          var icon = i.querySelector('.menu-icon');
          if (icon) icon.src = icon.dataset.iconWhite;
        });
        const noticeMenu = document.getElementById('menu6');
        noticeMenu.classList.add('active');
        const icon = noticeMenu.querySelector('.menu-icon');
        if (icon) icon.src = icon.dataset.iconBlack;

        const pageTitle = document.getElementById('pageTitle');
        pageTitle.innerHTML = `<span class="highlight">No</span>tice`;

        document.getElementById('contentFrame').src = 'notice.html?id=' + event.data.noticeId;
      }

      // â˜…â˜…â˜… "ë”ë³´ê¸°" ë²„íŠ¼ í´ë¦­ ì‹œ â˜…â˜…â˜…
      if (event.data && event.data.type === 'goNoticeMore') {
        // ë©”ë‰´ ì „ì²´ ë¹„í™œì„±í™” ë° ì•„ì´ì½˜ ë³€ê²½
        document.querySelectorAll('.menu-item').forEach(i => {
          i.classList.remove('active');
          var icon = i.querySelector('.menu-icon');
          if (icon) icon.src = icon.dataset.iconWhite;
        });
        // ê³µì§€ì‚¬í•­ ë©”ë‰´ë§Œ active ë° ì•„ì´ì½˜ black
        const noticeMenu = document.getElementById('menu6');
        noticeMenu.classList.add('active');
        const icon = noticeMenu.querySelector('.menu-icon');
        if (icon) icon.src = icon.dataset.iconBlack;

        // íƒ€ì´í‹€ ë³€ê²½
        const pageTitle = document.getElementById('pageTitle');
        if (pageTitle) pageTitle.innerHTML = `<span class="highlight">No</span>tice`;

        // notice.html ë¡œ iframe ì´ë™
        document.getElementById('contentFrame').src = 'notice.html';
      }
        // â˜…â˜…â˜… "ìµœê·¼ ì—…ë¡œë“œ ë”ë³´ê¸°" ë²„íŠ¼ í´ë¦­ ì‹œ â˜…â˜…â˜…
        if (event.data && event.data.type === 'goUploadMore') {
          document.querySelectorAll('.menu-item').forEach(i => {
            i.classList.remove('active');
            var icon = i.querySelector('.menu-icon');
            if (icon) icon.src = icon.dataset.iconWhite;
          });
          const menu3 = document.getElementById('menu3');
          menu3.classList.add('active');
          const icon = menu3.querySelector('.menu-icon');
          if (icon) icon.src = icon.dataset.iconBlack;
          const pageTitle = document.getElementById('pageTitle');
          if (pageTitle) pageTitle.innerHTML = `<span class="highlight">Te</span>st paper`;
          document.getElementById('contentFrame').src = 'high.html';
        }
    });
    // ë©”ë‰´ ë“±ì¥ ì• ë‹ˆë©”ì´ì…˜ ìˆœì°¨ì  ì ìš©
    window.addEventListener('DOMContentLoaded', () => {
      const menuIds = ["menu1", "menu2", "menu3", "menu4", "menu5", "menu6", "menu7", "menu8"];
      menuIds.forEach((id, idx) => {
        const el = document.getElementById(id);
        setTimeout(() => {
          el.classList.add("show");
        }, 300 + idx * 80);
      });
    });
    function toggleSidebarAnim() {
      const sb  = document.getElementById('sidebar');
      const btn = document.getElementById('toggleBtn');
      sb.classList.toggle('collapsed');
      btn.classList.toggle('active');
    }
    document.querySelectorAll('.menu-item').forEach(item => {
      item.addEventListener('click', function() {
        document.querySelectorAll('.menu-item').forEach(i => {
          i.classList.remove('active');
          // ì•„ì´ì½˜ í°ìƒ‰ìœ¼ë¡œ ë³€ê²½
          var icon = i.querySelector('.menu-icon');
          if (icon) icon.src = icon.dataset.iconWhite;
        });
        this.classList.add('active');
        // ì•„ì´ì½˜ ê²€ì •ìœ¼ë¡œ ë³€ê²½
        var activeIcon = this.querySelector('.menu-icon');
        if (activeIcon) activeIcon.src = activeIcon.dataset.iconBlack;
const url = this.dataset.url;
const menuId = this.id;

if (menuId === 'menu5') {
  fetch('/check-auth', { credentials: 'include', cache: 'no-store' })
    .then(res => res.json())
    .then(data => {
      if (data.isLoggedIn && (data.user?.hasPaid || data.user?.isAdmin)) {
        // âœ… ê´€ë¦¬ìë„ í—ˆìš©
        document.getElementById('contentFrame').src = url;
      } else {
      Swal.fire({
        icon: 'warning',
        title: 'ì´ìš© ë¶ˆê°€',
        text: 'í•´ë‹¹ ì„œë¹„ìŠ¤ëŠ” ê²°ì œí•œ ì‚¬ìš©ìë§Œ ì´ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
        confirmButtonText: 'í™•ì¸',
        confirmButtonColor: '#FDC512',
        background: '#1a1a1a',
        color: '#fff',
        iconColor: '#FDC512'
      }).then((result) => {
        // ì´ ë¶€ë¶„ì´ ë°˜ë“œì‹œ ì‚¬ìš©ìê°€ ëª¨ë‹¬ì„ ë‹«ì€ "í›„"ì—ë§Œ ì‹¤í–‰
        if (result.isConfirmed) {
          const frame = document.getElementById('contentFrame');
          frame.src = 'home.html';
          frame.style.height = "100%";
          document.getElementById('mainContent').style.height = "100%";
          document.querySelectorAll('.menu-item').forEach(i => {
            i.classList.remove('active');
            const icon = i.querySelector('.menu-icon');
            if (icon) icon.src = icon.dataset.iconWhite;
          });
          const menu1 = document.getElementById('menu1');
          menu1.classList.add('active');
          const firstIcon = menu1.querySelector('.menu-icon');
          if (firstIcon) firstIcon.src = firstIcon.dataset.iconBlack;
          const pageTitle = document.getElementById('pageTitle');
          if (pageTitle) pageTitle.innerHTML = `<span class="highlight">Ma</span>in home`;
        }
      });
      }
    })
    .catch(err => {
      console.error('ê²°ì œ í™•ì¸ ì‹¤íŒ¨', err);
    });
} else if (url) {
  document.getElementById('contentFrame').src = url;
}

        // **â˜… ì—¬ê¸°ì— íƒ€ì´í‹€ ë³€ê²½ ì½”ë“œ ì¶”ê°€ â˜…**
        const pageTitle = document.getElementById('pageTitle');
        const t = menuTitles[this.id];
        if (pageTitle && t) {
          pageTitle.innerHTML = `<span class="highlight">${t.highlight}</span>${t.text}`;
        }

      });
    });

    // í˜ì´ì§€ ë¡œë“œì‹œ ì²«ë²ˆì§¸ ë©”ë‰´ active + ì•„ì´ì½˜ ì„¸íŒ…
    window.addEventListener('DOMContentLoaded', () => {
      const first = document.getElementById('menu1');
      first.classList.add('active');

      // ì•„ì´ì½˜ í‘ë°± ì „í™˜
      const firstIcon = first.querySelector('.menu-icon');   // img íƒœê·¸ë¥¼ ë”°ë¡œ ì¡ê³ 
      firstIcon.src = firstIcon.dataset.iconBlack; 
      document.querySelectorAll('.menu-item:not(#menu1) .menu-icon').forEach(icon => {
        icon.src = icon.dataset.iconWhite;
      });

      // iframe ê¸°ë³¸ ë¡œë“œ
      document.getElementById('contentFrame').src = first.dataset.url;   // â† í•µì‹¬
    });

window.addEventListener('DOMContentLoaded', () => {
  const params = new URLSearchParams(window.location.search);
  const menuParam = params.get('menu');
  if (menuParam === 'notice') {
    // ëª¨ë“  ë©”ë‰´ ë¹„í™œì„±í™” ë° ì•„ì´ì½˜ white
    document.querySelectorAll('.menu-item').forEach(i => {
      i.classList.remove('active');
      var icon = i.querySelector('.menu-icon');
      if (icon) icon.src = icon.dataset.iconWhite;
    });
    // ê³µì§€ì‚¬í•­ ë©”ë‰´ë§Œ active ë° ì•„ì´ì½˜ black
    const noticeMenu = document.getElementById('menu6');
    noticeMenu.classList.add('active');
    const icon = noticeMenu.querySelector('.menu-icon');
    if (icon) icon.src = icon.dataset.iconBlack;

    // íƒ€ì´í‹€
    const pageTitle = document.getElementById('pageTitle');
    pageTitle.innerHTML = `<span class="highlight">No</span>tice`;

    // iframe src
    document.getElementById('contentFrame').src = 'notice.html';
  }
});


      function toggleSidebarAnim () {
        const sb  = document.getElementById('sidebar');
        const btn = document.getElementById('toggleBtn');
        const willOpen = sb.classList.contains('collapsed'); // ì ‘íŒ ìƒíƒœ â†’ ì—´ë¦´ ê±´ì§€?

        sb.classList.toggle('collapsed');   // í­ í† ê¸€
        btn.classList.toggle('active');
        sb.classList.remove('expanded');    // ê¸€ì”¨ ì ê¹ ìˆ¨ê¹€(absolute ìƒíƒœ)

        // ì—´ë¦´ ë•Œë§Œ, í­ 0.3 s ì• ë‹ˆë©”ì´ì…˜ì´ ëë‚œ ë’¤ì— expanded ë¶™ì—¬ ê¸€ì”¨ ë³µê·€
        if (willOpen) {
          setTimeout(() => sb.classList.add('expanded'), 300);
        }
      }

      const menuTitles = {
        menu1: { highlight: "Ma", text: "in home" },
        menu2: { highlight: "Pr", text: "oblem Bank" },
        menu3: { highlight: "Te", text: "st paper" },
        menu4: { highlight: "My", text: " Library" },
        menu5: { highlight: "Up", text: "load files" },
        menu6: { highlight: "No", text: "tice" },
        menu7: { highlight: "My", text: " Account" },
        menu8: { highlight: "Lo", text: "gout" }
      };
      
      </script>

      <!-- Help FAB + Dropdown ë§ˆí¬ì—… -->
      <div class="help-container" id="helpContainer">
        <ul class="help-menu" id="helpMenu">
          <li data-url="https://pf.kakao.com/_xyzxyz"><span class="badge">1</span>ì¹´ì¹´ì˜¤ ë¬¸ì˜í•˜ê¸°</li>
          <li><span class="badge">2</span>ë¬¸ì˜ ê²Œì‹œíŒ</li>
          <li><span class="badge">3</span>ì‹œí—˜ì§€ ìš”ì²­í•˜ê¸°</li>
          <li><span class="badge">4</span>ì‹œí—˜ì§€ ì¶œì œí•˜ê¸°(ì¤€ë¹„ì¤‘)</li>
        </ul>
        <button class="help-fab" id="helpFab" aria-label="ë„ì›€ë§">?</button>
      </div>

      <!-- ìƒˆë¡œ ì—¬ëŠ” <script> ë¸”ë¡ ì•ˆì— JS ì‚½ì… -->
      <script>
        window.addEventListener('DOMContentLoaded', () => {
          const fab  = document.getElementById('helpFab');
          const menu = document.getElementById('helpMenu');

          // ë²„íŠ¼ í´ë¦­ â†’ ë©”ë‰´ í† ê¸€
          fab.addEventListener('click', () => {
            menu.classList.toggle('show');
          });

          // í™”ë©´ ì•„ë¬´ ê³³ì´ë‚˜ í´ë¦­í•˜ë©´ ë‹«í˜
          document.addEventListener('click', e => {
            if (!menu.contains(e.target) && !fab.contains(e.target)) {
              menu.classList.remove('show');
            }
          });

          // ë©”ë‰´ í•­ëª© í´ë¦­ ì‹œ ìƒˆ ì°½ ì—´ê¸° + ë‹«ê¸°
          menu.querySelectorAll('li').forEach(li => {
            li.addEventListener('click', () => {
              const url = li.dataset.url;
              if (url) window.open(url, '_blank');
              menu.classList.remove('show');
            });
          });
        });

</script>
<!-- ê²°ì œ ëª¨ë‹¬ -->
<div id="paymentModal" class="modal-overlay">
  <div class="modal-content">
    <button class="close-modal" id="closeModalBtn">&times;</button>
    <iframe id="paymentIframe" src="" frameborder="0"></iframe>
  </div>
</div>

<!-- ì•ˆë‚´ ëª¨ë‹¬ -->
<div id="introOverlay" class="intro-overlay" aria-hidden="true">
  <div class="intro-modal" role="dialog" aria-modal="true" aria-labelledby="introTitle">
    <button class="intro-close" id="introCloseBtn" aria-label="ë‹«ê¸°">&times;</button>

    <div class="intro-head">
      <div class="intro-badge">MB</div>
      <div>
        <div id="introTitle" class="intro-title">Mathbee ì´ìš© ì•ˆë‚´</div>
        <div class="intro-sub">ì„ ìƒë‹˜ì˜ ì‹œê°„ì„ ì•„ë¼ëŠ” ë„êµ¬ê°€ ë˜ê² ìŠµë‹ˆë‹¤.</div>
      </div>
    </div>

    <div class="intro-body">
      <div class="intro-callout">
        ì„ ìƒë‹˜ë“¤ì˜ êµ¬ë…ë£ŒëŠ” <span class="intro-strong">ë””ìì¸Â·ì‚¬ìš©ì í¸ì˜Â·í•µì‹¬ ê¸°ëŠ¥ ê°œë°œ</span>ì— íˆ¬ëª…í•˜ê²Œ ì¬íˆ¬ìë©ë‹ˆë‹¤.
        í˜„ì¥ì—ì„œ í•„ìš”í•œ ê¸°ëŠ¥ì„ ë¹ ë¥´ê²Œ ë°˜ì˜í•˜ê³ , <span class="intro-strong">ì—…ë¬´ ì‹œê°„ì„ ì¤„ì—¬ë“œë¦¬ëŠ” ê²ƒ</span>ì„ ìµœìš°ì„ ìœ¼ë¡œ í•˜ê² ìŠµë‹ˆë‹¤.
      </div>

      <div class="intro-grid">
        <!-- 1) í˜„ì¬ ì œê³µ ê¸°ëŠ¥ -->
        <div class="intro-card">
          <h4></span>1) í˜„ì¬ ì œê³µ ê¸°ëŠ¥</h4>
          <ul class="intro-list intro-list-dot">
            <!-- ì‹œí—˜ì§€ ìš”ì²­ ì„œë¹„ìŠ¤ -->
            <li>
              <div class="intro-list-head">
                <span class="intro-dot"></span>
                <span class="intro-strong">ì‹œí—˜ì§€ ìš”ì²­ ì„œë¹„ìŠ¤</span>
              </div>
              <div class="intro-list-desc">
                ì„ ìƒë‹˜ê»˜ì„œ <b>ì§ì ‘ ì˜¬ë ¤ì£¼ì‹  íŒŒì¼</b>ì„ ë°”íƒ•ìœ¼ë¡œ,<br>
                í•´ì„¤ê³¼ ë¯¸ì£¼ê°€ í¬í•¨ëœ ì™„ì„±í˜• <b>í•œê¸€(HWP)</b> ì‹œí—˜ì§€ë¥¼ ì œì‘
              </div>
              <div class="intro-list-desc" style="margin-top:6px;">
                ğŸ‘‰ <b>ì¶”ê°€ ë¹„ìš© ì—†ì´ êµ¬ë…ë§Œìœ¼ë¡œ ì´ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.</b>
              </div>
            </li>

            <!-- ê¸°ì¶œë¬¸ì œ ë‹¤ìš´ë¡œë“œ -->
            <li>
              <div class="intro-list-head">
                <span class="intro-dot"></span>
                <span class="intro-strong">ê¸°ì¶œë¬¸ì œ ë‹¤ìš´ë¡œë“œ</span>
              </div>
              <div class="intro-list-desc">
                ë‹¤ì–‘í•œ ê¸°ì¶œì„ <b>PDFÂ·HWP</b>ë¡œ ë‚´ë ¤ë°›ê¸°
              </div>
            </li>

            <!-- ì•ˆë‚´ ë¬¸ì¥ -->
            <li>
              <div class="intro-note">
                ğŸ“¢ í˜„ì¬ <b>ë¬¸ì œì€í–‰</b>ì€ ê°œë°œ ì¤‘ì´ë¼ ì‹œí—˜ì§€ ìœ„ì£¼ë¡œ ìš´ì˜ ì¤‘ì´ë©°,
                    <b>êµ¬ë…ë£Œë¥¼ í• ì¸</b>í•˜ì—¬ ì œê³µí•˜ê³  ìˆìŠµë‹ˆë‹¤.
              </div>
            </li>
          </ul>
        </div>

        <!-- 2) ë¬¸ì œì€í–‰(ì œì‘ ì¤‘) -->
        <div class="intro-card">
          <h4></span>2) ë¬¸ì œì€í–‰ (ì œì‘ ì¤‘)</h4>
          <p>
            ë‹¨ì›Â·ìœ í˜•Â·ë‚œì´ë„ ë“± ì›í•˜ëŠ” ì¡°ê±´ìœ¼ë¡œ ë¬¸ì œë¥¼ ì¡°í•©í•´ ì‹œí—˜ì§€ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë„ë¡ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.
            <b>AI ê¸°ë°˜ ìœ ì‚¬ë¬¸í•­ ì¶”ì²œ</b>ê³¼ <b>ê°œë… ì¶”ê°€</b> ê¸°ëŠ¥ì„ í¬í•¨í•˜ë©°, ê²°ê³¼ë¬¼ì€ ëª¨ë‘ <b>í•œê¸€(HWP) ë‹¤ìš´ë¡œë“œ</b>ë¥¼ ì§€ì›í•©ë‹ˆë‹¤.
          </p>
        </div>

        <!-- 3) ë‚´ ì±…ì¥ í™•ì¥ -->
        <div class="intro-card">
          <h4></span>3) ë‚´ ì±…ì¥ ê¸°ëŠ¥ í™•ì¥</h4>
          <ul class="intro-list">
            <li><b>ë‚´ê°€ ì§ì ‘ ì œì‘í•œ ì‹œí—˜ì§€</b> ì €ì¥Â·ê´€ë¦¬</li>
            <li><b>í•™ë…„Â·ë‹¨ì›Â·ìœ í˜•ë³„ í´ë”</b>ë¥¼ ë§Œë“¤ì–´ ì—¬ëŸ¬ ì‹œí—˜ì§€ë¥¼ ì²´ê³„ì ìœ¼ë¡œ ì •ë¦¬</li>
            <li>ë¬¸ì œì€í–‰ì—ì„œ ê³ ë¥¸ ë¬¸ì œì— <b>ê°œë…ì„ ì¶”ê°€</b>í•´ ë§Œë“œëŠ” <b>ë§ì¶¤í˜• êµì¬</b> ê´€ë¦¬</li>
            <li>AI í¸ì§‘ìœ¼ë¡œ <b>ë””ìì¸Â·ë ˆì´ì•„ì›ƒ</b>ì„ ì›í•˜ëŠ” í˜•íƒœë¡œ ì¡°ì • ê°€ëŠ¥í•œ
                <b>êµì¬ ì œì‘ ì „ìš© ê³µê°„</b> ì œê³µ ì˜ˆì •</li>
          </ul>
        </div>

        <!-- 4) ì•½ì† -->
        <div class="intro-card">
          <h4><span class="intro-dot"></span>Mathbeeì˜ ì•½ì†</h4>
          <p>
            ì„ ìƒë‹˜ì˜ êµ¬ë…ì— ì±…ì„ ìˆê²Œ ë³´ë‹µí•˜ê² ìŠµë‹ˆë‹¤. ë§¤ë‹¬ í˜„ì¥ì— ê¼­ í•„ìš”í•œ ê°œì„ ì„ ë°˜ì˜í•˜ê³ ,
            <b>â€œì„ ìƒë‹˜ì˜ ì‹œê°„ì„ ì•„ê»´ì£¼ëŠ” íŒŒíŠ¸ë„ˆâ€</b>ê°€ ë˜ê² ìŠµë‹ˆë‹¤.
          </p>
        </div>
      </div>
    </div>

    <div class="intro-footer">
      <button class="btn-ghost" id="introNeverBtn">ë‹¤ì‹œ ë³´ì§€ ì•Šê¸°</button>
      <button class="btn-primary" id="introOkBtn">í™•ì¸</button>
    </div>
  </div>
</div>
<script>
  // í˜ì´ì§€ê°€ ë¡œë“œë˜ë©´ 'í¬ìŠ¤íŠ¸ì‡'ì´ ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.
  document.addEventListener('DOMContentLoaded', () => {
    const urlParams = new URLSearchParams(window.location.search);
    const paymentSuccess = urlParams.get('payment_success');

    // 'í¬ìŠ¤íŠ¸ì‡'ì´ ìˆìœ¼ë©´ ë©”ì‹œì§€ë¥¼ ë„ìš°ê³  ì£¼ì†Œì—ì„œ ë–¼ì–´ëƒ…ë‹ˆë‹¤.
    if (paymentSuccess === 'true') {
      alert('ì¹´ë“œ ë“±ë¡ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!');
      history.replaceState({}, document.title, window.location.pathname);
    }
  });

/* ===== ì•ˆë‚´ ëª¨ë‹¬ ë¡œì§ (DOM ìƒì„± í›„ ë°”ì¸ë”©) ===== */
(function(){
  const KEY = 'mathbee_intro_dismissed_v1';

  function qs(id){ return document.getElementById(id); }

  function bindIntroModal(){
    const overlay   = qs('introOverlay');
    const btnClose  = qs('introCloseBtn');
    const btnOk     = qs('introOkBtn');
    const btnNever  = qs('introNeverBtn');
    if(!overlay) return;

    function openIntro(){
      overlay.classList.add('show');
      document.body.style.overflow = 'hidden';
      overlay.setAttribute('aria-hidden','false');
    }
    function closeIntro(remember){
      overlay.classList.remove('show');
      document.body.style.overflow = '';
      overlay.setAttribute('aria-hidden','true');
      if(remember){ try{ localStorage.setItem(KEY,'1'); }catch(e){} }
    }

    btnClose && btnClose.addEventListener('click', ()=>closeIntro(false));
    btnOk    && btnOk.addEventListener('click',    ()=>closeIntro(false));
    btnNever && btnNever.addEventListener('click', ()=>closeIntro(true));
    overlay  && overlay.addEventListener('click', (e)=>{
      if(e.target === overlay) closeIntro(false);
    });

    // í˜ì´ì§€ ë‹¤ ëœ¬ ë’¤ 0.8ì´ˆ í›„ ì˜¤í”ˆ (ë‹¨, 'ë‹¤ì‹œ ë³´ì§€ ì•Šê¸°' ì €ì¥ ì•ˆ ëì„ ë•Œ)
    const dismissed = localStorage.getItem(KEY) === '1';
    if(!dismissed){ setTimeout(openIntro, 800); }

    // ë””ë²„ê·¸ìš©: ì½˜ì†”ì—ì„œ showIntro() ì…ë ¥ â†’ ê°•ì œ ë…¸ì¶œ
    window.showIntro = function(){
      localStorage.removeItem(KEY);
      openIntro();
    };
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', bindIntroModal);
  } else {
    bindIntroModal();
  }
});
</script>

</body>
</html>





