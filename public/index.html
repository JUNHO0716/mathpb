<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ëŒ€ì‹œë³´ë“œ</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap" rel="stylesheet">
  <link rel="icon" type="image/png" href="/logo_b.png" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700;900&display=swap" rel="stylesheet">

  <style>
    :root{
      --purple-bg:#ffffff;
      --purple-dk:#ffffff;
      --btn-bg:#FDC512;
      --btn-bg-hov:#D9A90F; 
      --border-light:#e9e9e9;      /* ğŸ†• ì•„ì£¼ ì˜…ì€ íšŒìƒ‰ */
      --text-main:#111;
      --text-sub:#5f5f5f;
    }

    * {
      box-sizing: border-box;
      font-family: 'Noto Sans KR', sans-serif;
    }

    body {
      margin: 0;
      display: flex;
      height: 100vh;
      background: #f5f6fa;
    }

    /* ===== Fade-in + Slide from Left ===== */
    .fade-in-left {
      opacity: 0;
      transform: translateX(-30px);
      animation: fadeInLeft 0.6s ease forwards;
    }

    @keyframes fadeInLeft {
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    /* ===== ì‚¬ì´ë“œë°” ìŠ¤íƒ€ì¼ ===== */
    .sidebar {
      width: 250px;
      background: #0f0f0f;
      color: white;
      transition: width 0.3s;
      display: flex;
      flex-direction: column;
      padding-top: 20px;
      align-items: stretch; 
      overflow-x: hidden;
    }

    .menu-list {
    display: flex;
    flex-direction: column;
    align-items: flex-start;   /* ë©”ë‰´ë“¤ì€ í•­ìƒ ìœ„ì—ì„œë¶€í„° ìŒ“ì´ê²Œ */
    width: 100%;               /* ë©”ë‰´ ì•„ì´í…œ í­ 100% */
  }

    .sidebar.collapsed {
      width: 80px;
    }

    .logo {
      height: 36px;
      margin-bottom: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      width: 100%;
    }

    .logo-text {
      font-size: 20px;
      font-weight: bold;
      transition: opacity 0.3s;
      opacity: 1;
    }

    .logo-img {
      position: absolute;
      width: 30px;
      height: 30px;
      opacity: 0;
      transition: opacity 0.3s;
    }

    .sidebar.collapsed .logo-text {
      opacity: 0;
    }

    .sidebar.collapsed .logo-img {
      opacity: 1;
    }

    .menu-item {
      position: relative;
      display: flex;
      align-items: center;
      padding: 15px 17px;
      cursor: pointer;
      transition: background 0.2s;
      width: 100%;
      opacity: 0;
      transform: translateX(-30px);
      margin-bottom: 12px;
    }

    .menu-item .active-bg {
      position: absolute;
      left: 12px;      /* í°ìƒ‰ ì‚¬ê°í˜• ì¢Œìš° ì—¬ë°±(ì¡°ì ˆ ê°€ëŠ¥) */
      right: 12px;
      top: 3px;        /* ìœ„/ì•„ë˜ ì—¬ë°± */
      bottom: 3px;
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 2px 12px #0002;
      z-index: 0;
      opacity: 0;     /* ê¸°ë³¸ íˆ¬ëª… */
      transition: opacity 0.18s;
    }
    .sidebar.collapsed .menu-item.active .active-bg {
      opacity: 1;
    }
    
    .menu-item.active .active-bg {
        opacity: 1;
      }

      .menu-item img.menu-icon {
      position: relative;
      z-index: 2;
    }

    .menu-item.show {
      animation: fadeInLeft 0.5s ease forwards;
    }

    .menu-item:hover {
      background: #1e1e1e;
    }

    .menu-item i,
    .menu-item span:not(.active-bg) {
      position: relative;
      z-index: 1;
    }
    .menu-item span:not(.active-bg) {
      display: inline-block;          /* í­ ì œì–´í•˜ë ¤ë©´ inline-block */
      max-width: 140px;               /* ì¶©ë¶„íˆ í° ê°’(í…ìŠ¤íŠ¸ ê¸¸ì´ë³´ë‹¤ ì—¬ìœ  ìˆê²Œ) */
      overflow: hidden;
      white-space: nowrap;
      opacity: 1;
      transition:
        max-width .25s ease .30s,     /* í­ì€ 0.30s ë’¤ì— ì—´ë¦¬ë©° 0.25s ë™ì•ˆ */
        opacity   .25s ease .30s;     /* ë™ì¼ íƒ€ì´ë°ìœ¼ë¡œ í˜ì´ë“œ-ì¸ */
    }

    .sidebar.collapsed .menu-item span:not(.active-bg) {
      max-width: 0;                   /* í­ 0 â†’ ì•„ì´ì½˜ ê³µê°„ë§Œ ë‚¨ìŒ */
      opacity: 0;                     /* íˆ¬ëª… */
      transition:
        max-width .20s ease 0s,       /* ì¦‰ì‹œ ì ‘íˆë©° 0.2s ë™ì•ˆ ë‹«í˜ */
        opacity   .05s ease 0s;       /* ë°”ë¡œ ì‚¬ë¼ì§ */
    }

    /* í­ì´ ë‹¤ ëŠ˜ì–´ë‚œ ë’¤ì— ê¸€ì”¨ ë‚˜íƒ€ë‚  ìˆ˜ ìˆë„ë¡ ì§€ì—° */
    .sidebar.expanded .menu-item span:not(.active-bg) {
      position: static;                /* ë‹¤ì‹œ ë ˆì´ì•„ì›ƒì— ì°¸ì—¬ */
      opacity: 1;                      /* ì„œì„œíˆ ë‚˜íƒ€ë‚¨ */
      transition: opacity .22s .05s;   /* 0.05s ì§€ì—° í›„ í˜ì´ë“œ-ì¸ */
    }

    .sidebar.collapsed .menu-item img.menu-icon {
      display: inline-block !important;
    }

    .menu-button {
      width: 20px;
      height: 20px;
      cursor: pointer;
      position: relative;
      background: none;
      border: none;
      outline: none;
      margin: 20px auto 20px auto;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .menu-button span {
      display: block;
      position: absolute;
      background-color: #fff;
      border-radius: 2px;
      transition: all 0.4s cubic-bezier(.7,.2,.17,1.3);
    }

    .menu-button span:nth-child(1),
    .menu-button span:nth-child(2),
    .menu-button span:nth-child(3) {
      width: 100%;
      height: 2px;   /* ë‘ê»˜ ì ˆë°˜ */
      left: 0;
    }

    .menu-button span:nth-child(1) { top: 2px; }
    .menu-button span:nth-child(2) { top: 6.5px; }
    .menu-button span:nth-child(3) { top: 11px; }

    .menu-button.active span {
      width: 2px;
      height: 100%;
      top: 0;
    }

    .menu-button.active span:nth-child(1) { left: 0px; }
    .menu-button.active span:nth-child(2) { left: 6.5px; }
    .menu-button.active span:nth-child(3) { left: 13px; }

    /* ===== ë©”ì¸ ì½˜í…ì¸  ===== */
    .main-content {
      flex-grow: 1;
      padding: 40px;
      opacity: 0;
      transform: translateX(-30px);
      animation: fadeInLeft 0.8s ease forwards;
      animation-delay: 0.3s;
    }

    .menu-item.active {
      color: #222;
      font-weight: 600;
      background: none;   /* ê¸°ì¡´ í°ë°°ê²½ ì§€ì›€ */
      box-shadow: none;   /* ê¸°ì¡´ ê·¸ë¦¼ì ì§€ì›€ */
      border-radius: 0;
    }

    .menu-item.active i {
      color: #4b39ef;
    }

    .menu-icon {
      width: 20px;
      height: 20px;
      margin-right: 15px;
      object-fit: contain;
      margin-left: 11px;
    }

    /* ===== Help FAB + Dropdown ===== */
    .help-container{position:fixed;bottom:24px;right:24px;z-index:999}
    .help-fab{width:46px;height:46px;border-radius:50%;border:none;background:#f8c900;color:#111;font-size:24px;cursor:pointer;box-shadow:0 8px 16px rgba(0,0,0,.2);transition:transform .15s}
    .help-fab:hover{transform:scale(1.06)}
    .help-menu{list-style:none;margin:0;padding:0;position:absolute;bottom:72px;right:0;background:#000000;width:280px;border-radius:12px;box-shadow:0 6px 20px rgba(0,0,0,.18);overflow:hidden;opacity:0;pointer-events:none;transform:translateY(10px);transition:all .25s}
    .help-menu.show{opacity:1;pointer-events:auto;transform:translateY(0)}
    .help-menu li{padding:14px 20px;font-size:14px;cursor:pointer;display:flex;gap:8px;align-items:center;transition:background .15s}
    .help-menu li:not(:last-child){border-bottom:1px solid #f0f0f0}
    .help-menu li:hover{background:#f7f7f7}
    .help-menu .badge{width:24px;height:24px;border-radius:50%;background:#eef0f4;display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:600;flex-shrink:0}

    /* â‘  sidebarëŠ” ì´ë¯¸ flex-column ì´ë¯€ë¡œ spacerì— flex-grow:1 */
    .spacer { flex-grow: 1; }

    /* â‘¡ ë¡œê·¸ì•„ì›ƒ ê¸€ì”¨ë„ ì ‘í ë•Œ ìˆ¨ê¸°ë ¤ë©´(ì„ íƒ) */
    .sidebar.collapsed .menu-item.logout span:not(.active-bg) {
      display: none;
    }

    /* â‘¢ í•˜ë‹¨ê³¼ ì¡°ê¸ˆ ë–¨ì–´ëœ¨ë¦¬ê³  ì‹¶ë‹¤ë©´ ì—¬ë°± ì£¼ê¸°(ì›í•˜ëŠ” ê°’) */
    .menu-item.logout { margin-bottom: 30px; }

    /* iframe ì „ìš© */
    #contentFrame{flex:1;border:none;width:100%;height:100%;}
    /* main-content ë¥¼ flex ì»¨í…Œì´ë„ˆë¡œ */
    .main-content{display:flex;padding:0;}

    /* â”€â”€â”€â”€â”€â”€ 1) í—¤ë” â”€â”€â”€â”€â”€â”€ */
      .page-header{
        min-width:980px;padding:28px 40px 16px;
        display:flex;align-items:center;justify-content:space-between;
        position:relative; background: #fff;
      }
      .header-titles h1{font-size:1.55rem;font-weight:900;color:var(--text-main);margin-bottom: 2px;}
      .sub-date{margin-top:4px;font-size:.95rem;font-weight:700;color:var(--text-sub);}

      .header-actions{display:flex;align-items:center;gap:16px;} /* ë²„íŠ¼ ê°„ê²© â†‘ */

      /* 1-a  ë²„íŠ¼ë“¤ */
      .action-btn{
        padding:8px 22px;border-radius:9999px;
        background:var(--btn-bg);color:#111;font-weight:700;
        font-size:.97rem;display:inline-flex;align-items:center;gap:8px;
        transition:.15s;text-decoration:none;
      }
      .action-btn i{font-size:.9rem;}
      .action-btn:hover{background:var(--btn-bg-hov);}
      /* ë²„íŠ¼ë¼ë¦¬ ì‚´ì§ ë„ìš°ê¸° */
      .action-btn+ .action-btn{margin-left:0;} 

      /* 1-b  í”„ë¡œí•„ */
      .user-wrapper{position:relative;}
      .user-box{
        display:flex;align-items:center;gap:14px;cursor:pointer; /* gap â†‘ */
      }
      .avatar{
        width:42px;height:42px;border-radius:50%;
        object-fit:cover;background:#ddd;
      }
      .user-name{
        font-size:1.05rem;font-weight:700;color:var(--text-main);
        white-space:nowrap;
      }
      .user-box i{font-size:.8rem;color:#888;transition:.2s;}

      .dropdown{
        position:absolute;right:0;top:calc(100% + 6px);
        min-width:160px;background:#fff;border:1px solid #eee;border-radius:10px;
        box-shadow:0 4px 14px rgba(0,0,0,.06);padding:8px 0;display:none;z-index:20;
      }
      .dropdown a{
        display:block;padding:10px 18px;font-size:.92rem;color:#333;
        text-decoration:none;white-space:nowrap;transition:.13s;
      }
      .dropdown a:hover{background:#f8f8f8;}

      .page-header::after{
      content:'';
      position:absolute;
      left:50%;                          /* ê°€ìš´ë° ê¸°ì¤€ */
      bottom:0;                          /* í—¤ë” ë§¨ ì•„ë˜ */
      transform:translateX(-50%);        /* ì •í™•í•œ ì¤‘ì•™ ì •ë ¬ */

      width:97%;                         /* â† ê¸¸ì´(=ì–‘ìª½ ì—¬ë°±) ì¡°ì ˆ í¬ì¸íŠ¸ */
      height:1px;                        /* ì„  êµµê¸° */
      background:var(--border-light);    /* ì„  ìƒ‰ìƒ */
      }

    .highlight {
      position: relative;
      display: inline-block;
    }

    .highlight::before {
      content: "";
      position: absolute;
      top: -4px;      /* ê¸€ì ìœ„ ìœ„ì¹˜ */
      left: 0;
      width: 30px;    /* ì„  ê¸¸ì´ */
      height: 5px;    /* ì„  êµµê¸° */
      background: #f8c900;  /* ë…¸ë€ìƒ‰ */
      border-radius: 2px;
    }

    .main-content {
      display: flex;
      flex-direction: column;   /* â† ì´ í•œ ì¤„ì´ ì—†ìœ¼ë©´ ì„¸ë¡œë¡œ ìŒ“ì´ì§€ ì•ŠìŠµë‹ˆë‹¤! */
      flex-grow: 1;
      padding: 0;
      overflow: hidden;
    }
    
    .user-box.loading * { visibility: hidden; }

  </style>
</head>
<body>

  <div class="sidebar fade-in-left" id="sidebar">
    <div class="logo">
      <span class="logo-text">ìˆ˜í•™ì§€ë‹ˆ</span>
      <img src="logo.png" alt="ë¡œê³ " class="logo-img">
    </div>
    <button class="menu-button" id="toggleBtn" onclick="toggleSidebarAnim()" aria-label="ì‚¬ì´ë“œë°” ì—´ê¸°/ë‹«ê¸°">
      <span></span>
      <span></span>
      <span></span>
    </button>
    <div class="menu-list">
    <div class="menu-item" id="menu1" data-url="home.html">
      <span class="active-bg"></span>
      <img class="menu-icon" src="main_home_w.png"
        data-icon-black="main_home_b.png" data-icon-white="main_home_w.png" alt="" />
      <span>ë©”ì¸í™ˆ</span>
    </div>
    <div class="menu-item" id="menu2" data-url="problem_bank.html">
      <span class="active-bg"></span>
      <img class="menu-icon" src="icon_book_w.png"
          data-icon-black="icon_book_b.png" data-icon-white="icon_book_w.png" alt="">
      <span>ë¬¸ì œì€í–‰</span>
    </div>
    <div class="menu-item" id="menu3" data-url="high.html">
      <span class="active-bg"></span>
      <img class="menu-icon" src="icon_school_w.png" 
        data-icon-black="icon_school_b.png" data-icon-white="icon_school_w.png" alt="" />
      <span>ë‚´ì‹ ê¸°ì¶œ ì‹œí—˜ì§€</span>
    </div>
    <div class="menu-item" id="menu4" data-url="my_collection.html">
      <span class="active-bg"></span>
      <img class="menu-icon" src="icon_bookcase_w.png" 
        data-icon-black="icon_bookcase_b.png" data-icon-white="icon_bookcase_w.png" alt="" />
      <span>ë‚´ ì±…ì¥</span>
    </div>
    <div class="menu-item" id="menu5" data-url="upload.html">
      <span class="active-bg"></span>
      <img class="menu-icon" src="icon_upload_w.png" 
        data-icon-black="icon_upload_b.png" data-icon-white="icon_upload_w.png" alt="" />
      <span>ì‹œí—˜ì§€ ìš”ì²­</span>
    </div>
     <div class="menu-item" id="menu6" data-url="notice.html">
      <span class="active-bg"></span>
      <img class="menu-icon" src="icon_notification_w.png" 
        data-icon-black="icon_notification_b.png" data-icon-white="icon_notification_w.png" alt="" />
      <span>ê³µì§€ì‚¬í•­</span>
    </div>
      <div class="menu-item" id="menu7" data-url="profile.html">
      <span class="active-bg"></span>
      <img class="menu-icon" src="icon_my_w.png" 
        data-icon-black="icon_my_b.png" data-icon-white="icon_my_w.png" alt="" />
      <span>ë‚´ ê³„ì •</span>
    </div>
  </div>
    <div class="spacer"></div>
    <div class="menu-item" id="menu8">
      <span class="active-bg"></span>
      <img class="menu-icon" src="icon_logout_w.png" 
        data-icon-black="icon_logout_b.png" data-icon-white="icon_logout_w.png" alt="" />
      <span>ë¡œê·¸ì•„ì›ƒ</span>
    </div>
  </div>

<div class="main-content" id="mainContent">
  <header class="page-header">
    <div class="header-titles">
      <h1 id="pageTitle"><span class="highlight">Ma</span>in home</h1>
      <div class="sub-date" id="todayTxt"></div>
    </div>
    <div class="header-actions">
      <a href="payment.html" class="action-btn"><i class="fa-regular fa-credit-card"></i> ê²°ì œí•˜ê¸°</a>
      <a href="review_form.html" class="action-btn"><i class="fa-regular fa-pen-to-square"></i> í›„ê¸° ë‚¨ê¸°ê¸°</a>
      <div class="user-wrapper" id="userWrapper">
        <div class="user-box loading" id="userBox">
          <img src="icon_my_b.png" alt="avatar" class="avatar" id="avatar">
          <h3 id="profileName">Guest</h3>
          <i class="fa-solid fa-chevron-down" id="arrowIcon"></i>
        </div>
        <div class="dropdown" id="dropdownMenu">
          <a href="profile.html">ë‚´ í”„ë¡œí•„</a>
          <a href="#" id="logoutBtn">ë¡œê·¸ì•„ì›ƒ</a>
        </div>
      </div>
    </div>
  </header>  <!-- â† â† â† ë°˜ë“œì‹œ ë‹«ëŠ”ë‹¤!! -->

  <iframe id="contentFrame" src="home.html"></iframe>
</div>

  <script>
    // ë‚ ì§œ í‘œì‹œ
    const wk=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];
    const mo=['January','February','March','April','May','June','July','August','September','October','November','December'];
    function setToday(){
      const t=new Date();
      document.getElementById('todayTxt').textContent =
        `${wk[t.getDay()]}  ${String(t.getDate()).padStart(2,'0')} ${mo[t.getMonth()]} ${t.getFullYear()}`;
    }
    
    /* ë¡œê·¸ì¸Â·í”„ë¡œí•„ ë°”ì¸ë”© + ê´€ë¦¬ì íŒë³„ */
    let IS_ADMIN=false;
          async function bindUser(){
      try{
        const res=await fetch('/check-auth?ts='+Date.now(),{credentials:'include',cache:'no-store'});
        const d=await res.json();
        console.log('check-auth:', d); // ì‘ë‹µ í™•ì¸

        IS_ADMIN=d.isLoggedIn && d.user && d.user.role==='admin';

        // fab-add ì•ˆì „ ì²˜ë¦¬
        const fabAdd = document.getElementById('fab-add');
        if(fabAdd) fabAdd.style.display=IS_ADMIN?'flex':'none';

        if(!d.isLoggedIn) return;

        const u=d.user||{};
        let displayId = 'Guest';

        // âœ… ìš°ì„  ì´ë©”ì¼ @ì•ë¶€ë¶„
        if (u.email) {
          displayId = u.email.split('@')[0];
        }
        // âœ… idê°€ ë¬¸ìì—´ì´ê³  @ í¬í•¨ë˜ë©´ ê·¸ê²ƒë„ @ì•ë¶€ë¶„
        else if (u.id && typeof u.id === 'string' && u.id.includes('@')) {
          displayId = u.id.split('@')[0];
        }
        // âœ… idê°€ ìˆì§€ë§Œ ìˆ«ìê±°ë‚˜ ê·¸ëƒ¥ ì´ìƒí•˜ë©´ nameìœ¼ë¡œ
        else if (u.name) {
          displayId = u.name;
        }

        document.getElementById('profileName').textContent = displayId;

        const sidebarProfile = document.getElementById('sidebarProfileEmail');
        if(sidebarProfile) sidebarProfile.textContent = displayId;

        if(u.avatarUrl){
          document.getElementById('avatar').src=u.avatarUrl;
          document.getElementById('avatar').alt=displayId;
        } else {
          document.getElementById('avatar').src='icon_my_b.png';
        }

      document.getElementById('userBox').classList.remove('loading');

      }catch(e){
        console.error(e);
      }
    }


     // í”„ë¡œí•„ ë“œë¡­ë‹¤ìš´
    function initDropdown(){
      const box=document.getElementById('userBox');
      const menu=document.getElementById('dropdownMenu');
      const arrow=document.getElementById('arrowIcon');
      box.addEventListener('click',e=>{
        e.stopPropagation();
        const open=menu.style.display==='block';
        menu.style.display=open?'none':'block';
        arrow.style.transform=open?'rotate(0deg)':'rotate(180deg)';
      });
      document.addEventListener('click',e=>{
        if(!menu.contains(e.target)){
          menu.style.display='none';
          arrow.style.transform='rotate(0deg)';
        }
      });
    }

    document.addEventListener('DOMContentLoaded',()=>{
      setToday();
      initDropdown();
      bindUser();

      const sidebarLogout = document.getElementById('menu8');
      if(sidebarLogout) sidebarLogout.addEventListener('click', async ()=>{
        try {
          await fetch('/logout', {credentials:'include'});
          location.href = '/login.html';
        } catch(e){
          console.error('ë¡œê·¸ì•„ì›ƒ ì‹¤íŒ¨', e);
        }
      });
      const dropdownLogout = document.getElementById('logoutBtn');

      async function logout(){
        await fetch('/logout',{credentials:'include'});
        location.href = '/login.html';  // ë˜ëŠ” location.reload(); ì›í•˜ëŠ” ë°©ì‹ ì„ íƒ
      }

      if(sidebarLogout) sidebarLogout.addEventListener('click', logout);
      if(dropdownLogout) dropdownLogout.addEventListener('click', logout);

    });
    


    // ë©”ë‰´ ë“±ì¥ ì• ë‹ˆë©”ì´ì…˜ ìˆœì°¨ì  ì ìš©
    window.addEventListener('DOMContentLoaded', () => {
      const menuIds = ["menu1", "menu2", "menu3", "menu4", "menu5", "menu6", "menu7", "menu8"];
      menuIds.forEach((id, idx) => {
        const el = document.getElementById(id);
        setTimeout(() => {
          el.classList.add("show");
        }, 300 + idx * 80);
      });
    });
    function toggleSidebarAnim() {
      const sb  = document.getElementById('sidebar');
      const btn = document.getElementById('toggleBtn');
      sb.classList.toggle('collapsed');
      btn.classList.toggle('active');
    }
    document.querySelectorAll('.menu-item').forEach(item => {
      item.addEventListener('click', function() {
        document.querySelectorAll('.menu-item').forEach(i => {
          i.classList.remove('active');
          // ì•„ì´ì½˜ í°ìƒ‰ìœ¼ë¡œ ë³€ê²½
          var icon = i.querySelector('.menu-icon');
          if (icon) icon.src = icon.dataset.iconWhite;
        });
        this.classList.add('active');
        // ì•„ì´ì½˜ ê²€ì •ìœ¼ë¡œ ë³€ê²½
        var activeIcon = this.querySelector('.menu-icon');
        if (activeIcon) activeIcon.src = activeIcon.dataset.iconBlack;
        const url = this.dataset.url;                         // â˜… ì¶”ê°€
       if (url) document.getElementById('contentFrame').src = url;  // â˜… ì¶”ê°€

        // **â˜… ì—¬ê¸°ì— íƒ€ì´í‹€ ë³€ê²½ ì½”ë“œ ì¶”ê°€ â˜…**
        const pageTitle = document.getElementById('pageTitle');
        const t = menuTitles[this.id];
        if (pageTitle && t) {
          pageTitle.innerHTML = `<span class="highlight">${t.highlight}</span>${t.text}`;
        }

      });
    });

    // í˜ì´ì§€ ë¡œë“œì‹œ ì²«ë²ˆì§¸ ë©”ë‰´ active + ì•„ì´ì½˜ ì„¸íŒ…
    window.addEventListener('DOMContentLoaded', () => {
      const first = document.getElementById('menu1');
      first.classList.add('active');

      // ì•„ì´ì½˜ í‘ë°± ì „í™˜
      const firstIcon = first.querySelector('.menu-icon');   // img íƒœê·¸ë¥¼ ë”°ë¡œ ì¡ê³ 
      firstIcon.src = firstIcon.dataset.iconBlack; 
      document.querySelectorAll('.menu-item:not(#menu1) .menu-icon').forEach(icon => {
        icon.src = icon.dataset.iconWhite;
      });

      // iframe ê¸°ë³¸ ë¡œë“œ
      document.getElementById('contentFrame').src = first.dataset.url;   // â† í•µì‹¬
    });
      function toggleSidebarAnim () {
        const sb  = document.getElementById('sidebar');
        const btn = document.getElementById('toggleBtn');
        const willOpen = sb.classList.contains('collapsed'); // ì ‘íŒ ìƒíƒœ â†’ ì—´ë¦´ ê±´ì§€?

        sb.classList.toggle('collapsed');   // í­ í† ê¸€
        btn.classList.toggle('active');
        sb.classList.remove('expanded');    // ê¸€ì”¨ ì ê¹ ìˆ¨ê¹€(absolute ìƒíƒœ)

        // ì—´ë¦´ ë•Œë§Œ, í­ 0.3 s ì• ë‹ˆë©”ì´ì…˜ì´ ëë‚œ ë’¤ì— expanded ë¶™ì—¬ ê¸€ì”¨ ë³µê·€
        if (willOpen) {
          setTimeout(() => sb.classList.add('expanded'), 300);
        }
      }

      const menuTitles = {
        menu1: { highlight: "Ma", text: "in home" },
        menu2: { highlight: "Pr", text: "oblem Bank" },
        menu3: { highlight: "Te", text: "st paper" },
        menu4: { highlight: "My", text: " Library" },
        menu5: { highlight: "Up", text: "load files" },
        menu6: { highlight: "No", text: "tice" },
        menu7: { highlight: "My", text: " Account" },
        menu8: { highlight: "Lo", text: "gout" }
      };
      
      </script>

      <!-- Help FAB + Dropdown ë§ˆí¬ì—… -->
      <div class="help-container" id="helpContainer">
        <ul class="help-menu" id="helpMenu">
          <li data-url="https://pf.kakao.com/_xyzxyz"><span class="badge">1</span>ì¹´ì¹´ì˜¤ ë¬¸ì˜í•˜ê¸°</li>
          <li><span class="badge">2</span>ë‚´ ë¬¸ì œì§€ ë§Œë“¤ê¸°</li>
          <li><span class="badge">3</span>ë¬¸ì œì§€ ëœë¤ ì¶œì œ</li>
          <li><span class="badge">4</span>í•™êµ ì‹œí—˜ì§€ë¡œ ë¬¸ì œì§€ ë§Œë“¤ê¸°</li>
          <li><span class="badge">5</span>ê°œì¸ ìë£Œ DBí™”í•´ì„œ ë¬¸ì œì§€ ë§Œë“¤ê¸°</li>
        </ul>
        <button class="help-fab" id="helpFab" aria-label="ë„ì›€ë§">?</button>
      </div>

      <!-- ìƒˆë¡œ ì—¬ëŠ” <script> ë¸”ë¡ ì•ˆì— JS ì‚½ì… -->
      <script>
        window.addEventListener('DOMContentLoaded', () => {
          const fab  = document.getElementById('helpFab');
          const menu = document.getElementById('helpMenu');

          // ë²„íŠ¼ í´ë¦­ â†’ ë©”ë‰´ í† ê¸€
          fab.addEventListener('click', () => {
            menu.classList.toggle('show');
          });

          // í™”ë©´ ì•„ë¬´ ê³³ì´ë‚˜ í´ë¦­í•˜ë©´ ë‹«í˜
          document.addEventListener('click', e => {
            if (!menu.contains(e.target) && !fab.contains(e.target)) {
              menu.classList.remove('show');
            }
          });

          // ë©”ë‰´ í•­ëª© í´ë¦­ ì‹œ ìƒˆ ì°½ ì—´ê¸° + ë‹«ê¸°
          menu.querySelectorAll('li').forEach(li => {
            li.addEventListener('click', () => {
              const url = li.dataset.url;
              if (url) window.open(url, '_blank');
              menu.classList.remove('show');
            });
          });
        });
</script>
</body>
</html>